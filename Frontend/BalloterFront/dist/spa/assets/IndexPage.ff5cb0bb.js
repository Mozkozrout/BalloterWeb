import{Q as o,a as B}from"./QSkeleton.953fdc16.js";import{d as A,S as z,I as w,U as j,J as u,V as q,K as f,L as l,f as e,a4 as s,P as d,b5 as i,Z as c,b6 as g,a5 as r,b7 as b,N as p,O as x,X as y,F as C,Y as S}from"./index.0f3dcf3a.js";import{Q as v}from"./QTooltip.bb21c793.js";import{u as Q}from"./BallotStore.5b1c0dbb.js";import{_ as M}from"./logo_text.678d9cc1.js";import"./position-engine.be318796.js";import"./selection.b6202499.js";const I=A({name:"IndexDashBoard",mounted(){this.authStore.user!==null&&(this.ballotStore.ballots.length==0&&this.loadBallots(),this.ballotStore.motions.length==0&&this.loadMotions())},methods:{onEditClick(){this.$router.push({path:"/ballot/edit/"+this.ballotStore.ballot.Ballot.id})},onMotionAddClick(){this.$q.dialog({title:this.$t("motion.add.title"),message:this.$t("motion.add.message"),prompt:{model:"",type:"text"},persistent:!1,ok:{flat:!0,color:"light-blue-13",label:this.$t("motion.add.button.ok")},cancel:{flat:!0,color:"orange-13",label:this.$t("motion.add.button.cancel")}}).onOk(async t=>{this.authStore.user!=null&&this.authStore.user.person==null?this.$q.dialog({title:this.$t("motion.add.warning.title"),message:this.$t("motion.add.warning.message"),ok:{flat:!0,color:"light-blue-13"}}):await this.ballotStore.createMotion(t)?(this.$q.notify({icon:"done",color:"positive",message:this.$t("motion.add.success")}),this.$router.push({name:"motion",params:{user:0}})):this.$q.notify({icon:"warning",color:"negative",message:this.$t("motion.add.failure")})})},onBallotAddClick(){this.authStore.user!=null&&this.authStore.user.person==null?this.$q.dialog({title:this.$t("ballot.add.warning.user.title"),message:this.$t("ballot.add.warning.user.message"),ok:{flat:!0,color:"light-blue-13"}}):this.ballotStore.ballot!=null?this.$q.dialog({title:this.$t("ballot.add.warning.autosave.title"),message:this.$t("ballot.add.warning.autosave.message"),persistent:!0,ok:{flat:!0,color:"orange-13",label:this.$t("ballot.add.warning.autosave.button.ok")},cancel:{flat:!0,color:"light-blue-13",label:this.$t("ballot.add.warning.autosave.button.cancel")}}).onOk(()=>{this.removeSavedBallot(),this.$router.push({path:"/ballot/edit/0"})}).onCancel(()=>{this.$router.push({path:"/ballot/edit/"+this.ballotStore.ballot.Ballot.id})}):this.$router.push({path:"/ballot/edit/0"})},async loadBallots(){await this.ballotStore.loadBallots()||this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballot.load.failure")})},async loadMotions(){await this.ballotStore.loadMotions()||this.$q.notify({icon:"warning",color:"negative",message:this.$t("motion.load.failure")})},removeSavedBallot(){localStorage.removeItem("ballot"),this.ballotStore.savedBallot=null},motionName(){var a,n,m;let t=30;return((a=this.ballotStore.ballot.Ballot.motion)==null?void 0:a.name.length)>t?((n=this.ballotStore.ballot.Ballot.motion)==null?void 0:n.name.substring(0,t))+"...":(m=this.ballotStore.ballot.Ballot.motion)==null?void 0:m.name}},computed:{...z(j,Q),countUserBallots(){var t=0;return this.ballotStore.ballots.forEach(a=>{a.People.forEach(n=>{var m;((m=this.authStore.user)==null?void 0:m.person.id)===n.person_id.id&&n.author==1&&t++})}),t},countUserMotions(){var t=0;return this.ballotStore.motions.forEach(a=>{var n;((n=this.authStore.user)==null?void 0:n.person.id)===a.added_by.id&&t++}),t}}}),U={class:"q-px-lg q-pt-md"},D={class:"q-pa-md q-gutter-sm"},P={class:"col-auto"},Y={class:"q-pa-sm q-gutter-sm"},N={class:"col-auto"},E={class:"q-pa-sm q-gutter-sm"},V={class:"col-auto"},L={class:"q-pa-sm q-gutter-sm"};function K(t,a,n,m,k,_){return u(),q(C,null,[t.authStore.user===null?(u(),f(b,{key:0,square:"",class:r({"shadow-24":!t.$q.dark.isActive}),style:{"max-width":"540px"}},{default:l(()=>[e(i,null,{default:l(()=>[s("p",U,d(t.$t("index.unauthorized.message")),1)]),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",D,[e(c,{to:{name:"auth",params:{register:0}},elevated:"",size:"lg",color:"light-blue-13",class:"text-white q-ma-md hidden-link",label:t.$t("index.unauthorized.login"),icon:"login"},null,8,["label"]),e(c,{to:{name:"auth",params:{register:1}},elevated:"",size:"lg",color:"orange-13",class:"text-white q-ma-md hidden-link",label:t.$t("index.unauthorized.register"),icon:"person_add"},null,8,["label"])])]),_:1})]),_:1},8,["class"])):p("",!0),t.authStore.user!==null?(u(),f(b,{key:1,class:r(["q-ma-lg",{"shadow-24":!t.$q.dark.isActive}]),style:{"min-width":"340px"}},{default:l(()=>[e(c,{flat:"",round:"","text-color":t.$q.dark.isActive?"grey-8":"grey-6",icon:"info"},{default:l(()=>[e(v,null,{default:l(()=>[x(d(t.$t("index.ballots.tooltip")),1)]),_:1})]),_:1},8,["text-color"]),e(i,{class:"row justify-center"},{default:l(()=>[s("div",P,[e(y,{color:t.$q.dark.isActive?"light-blue-13":"light-blue-1","text-color":t.$q.dark.isActive?"light-blue-1":"light-blue-13",icon:"ballot",size:"50px","font-size":"30px"},null,8,["color","text-color"])])]),_:1}),e(i,null,{default:l(()=>[s("h3",{class:r(["text-center text-weight-bold q-my-xs",{"text-dark":!t.$q.dark.isActive}])},d(t.$t("index.ballots.title")),3),s("p",{class:r(["text-center text-caption",{"text-dark":!t.$q.dark.isActive}])},d(t.$t("index.ballots.totalBallots")+t.countUserBallots+(t.countUserBallots==1?t.$t("index.ballots.totalBallots2"):t.countUserBallots>1&&t.countUserBallots<5?t.$t("index.ballots.totalBallots3"):t.$t("index.ballots.totalBallots4"))),3)]),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",Y,[e(c,{to:{name:"ballot",params:{user:0}},elevated:"",flat:"",size:"lg",color:"light-blue-13",class:"text-white q-ma-md",label:t.$t("index.ballots.button.redirect"),"icon-right":"arrow_forward"},null,8,["label"]),e(c,{onClick:a[0]||(a[0]=h=>t.onBallotAddClick()),fab:"",elevated:"",size:"lg",color:"light-blue-13",class:"text-white q-ml-xl q-mb-md",icon:"add"})])]),_:1})]),_:1},8,["class"])):p("",!0),t.authStore.user!==null?(u(),f(b,{key:2,class:r(["q-ma-lg",{"shadow-24":!t.$q.dark.isActive}]),style:{"min-width":"340px"}},{default:l(()=>[e(c,{flat:"",round:"","text-color":t.$q.dark.isActive?"grey-8":"grey-6",icon:"info"},{default:l(()=>[e(v,null,{default:l(()=>[x(d(t.$t("index.motions.tooltip")),1)]),_:1})]),_:1},8,["text-color"]),e(i,{class:"row justify-center"},{default:l(()=>[s("div",N,[e(y,{color:t.$q.dark.isActive?"orange-14":"orange-2","text-color":t.$q.dark.isActive?"orange-1":"orange-14",icon:"history_edu",size:"50px","font-size":"30px"},null,8,["color","text-color"])])]),_:1}),e(i,null,{default:l(()=>[s("h3",{class:r(["text-center text-weight-bold q-my-xs",{"text-dark":!t.$q.dark.isActive}])},d(t.$t("index.motions.title")),3),s("p",{class:r(["text-center text-caption",{"text-dark":!t.$q.dark.isActive}])},d(t.$t("index.motions.totalMotions")+t.countUserMotions+(t.countUserMotions==1?t.$t("index.motions.totalMotions2"):t.countUserMotions>1&&t.countUserMotions<5?t.$t("index.motions.totalMotions3"):t.$t("index.motions.totalMotions4"))),3)]),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",E,[e(c,{to:{name:"motion",params:{user:0}},elevated:"",flat:"",size:"lg",color:"orange-14",class:"text-white q-ma-md",label:t.$t("index.motions.button.redirect"),"icon-right":"arrow_forward"},null,8,["label"]),e(c,{onClick:a[1]||(a[1]=h=>t.onMotionAddClick()),fab:"",elevated:"",size:"lg",color:"orange-13",class:"text-white q-ml-xl q-mb-md",icon:"add"})])]),_:1})]),_:1},8,["class"])):p("",!0),t.authStore.user!==null&&t.ballotStore.ballot!=null?(u(),f(b,{key:3,class:r(["q-ma-lg",{"shadow-24":!t.$q.dark.isActive}]),style:{"min-width":"340px"}},{default:l(()=>[e(c,{flat:"",round:"","text-color":t.$q.dark.isActive?"grey-8":"grey-6",icon:"info"},{default:l(()=>[e(v,null,{default:l(()=>[x(d(t.$t("index.autosave.tooltip")),1)]),_:1})]),_:1},8,["text-color"]),e(i,{class:"row justify-center"},{default:l(()=>[s("div",V,[e(y,{color:t.$q.dark.isActive?"lime-14":"lime-3","text-color":t.$q.dark.isActive?"lime-1":"lime-14",icon:"edit_document",size:"50px","font-size":"30px"},null,8,["color","text-color"])])]),_:1}),e(i,null,{default:l(()=>{var h,$;return[s("h3",{class:r(["text-center text-weight-bold q-my-xs",{"text-dark":!t.$q.dark.isActive}])},d(t.$t("index.autosave.title")),3),s("p",{class:r(["text-center text-subtitle2 q-my-xs",{"text-dark":!t.$q.dark.isActive}])},d(t.motionName()),3),s("p",{class:r(["text-center text-caption q-my-xs",{"text-dark":!t.$q.dark.isActive}])},d(((h=t.ballotStore.ballot.Ballot.tournament)==null?void 0:h.name)+" - "+new Date(($=t.ballotStore.ballot.Ballot)==null?void 0:$.date).toLocaleDateString()),3)]}),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",L,[e(c,{onClick:a[2]||(a[2]=h=>t.removeSavedBallot()),elevated:"",flat:"",size:"lg",color:"negative",class:"q-ma-md",label:t.$t("index.autosave.button.delete"),icon:"delete"},null,8,["label"]),e(c,{onClick:a[3]||(a[3]=h=>t.onEditClick()),fab:"",elevated:"",size:"lg",color:"lime-14",class:"text-white q-ml-xl q-mb-md",icon:"edit"})])]),_:1})]),_:1},8,["class"])):p("",!0)],64)}var O=w(I,[["render",K]]);const F=A({name:"IndexPageSkeleton"}),T={class:"column q-pa-xl self-center"},J={class:"row",style:{transform:"translateY(160px)"}},X={class:"col-auto"},Z={class:"row justify-center"},G={class:"row justify-center"},H={class:"q-pa-sm q-gutter-sm"},R={class:"col-auto"},W={class:"row justify-center"},tt={class:"row justify-center"},et={class:"q-pa-sm q-gutter-sm"},lt={class:"col-auto"},st={class:"row justify-center"},ot={class:"row justify-center"},at={class:"q-pa-sm q-gutter-sm"};function it(t,a,n,m,k,_){return u(),f(B,{class:"row justify-center items-center",style:{background:"linear-gradient(#ffffff, #bbbbbb)"}},{default:l(()=>[s("div",T,[s("div",J,[e(b,{class:"q-ma-lg",style:{"min-width":"340px",height:"370px"}},{default:l(()=>[e(o,{type:"circle",class:"q-ma-md",size:"20px"}),e(i,{class:"row justify-center"},{default:l(()=>[s("div",X,[e(o,{type:"QAvatar",size:"50px",class:"q-ma-md"})])]),_:1}),e(i,null,{default:l(()=>[s("div",Z,[e(o,{type:"rect",class:"q-py-md",width:"200px"})]),s("div",G,[e(o,{type:"text",class:"q-ma-md",width:"150px"})])]),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",H,[e(o,{type:"QBtn",class:"absolute",height:"50px",width:"125px",style:{bottom:"0",left:"50px",transform:"translateY(-25px)"}}),e(o,{type:"circle",size:"60px",class:"absolute",style:{bottom:"0",right:"50px",transform:"translateY(-25px)"}})])]),_:1})]),_:1}),e(b,{class:"q-ma-lg",style:{"min-width":"340px",height:"370px"}},{default:l(()=>[e(o,{type:"circle",class:"q-ma-md",size:"20px"}),e(i,{class:"row justify-center"},{default:l(()=>[s("div",R,[e(o,{type:"QAvatar",size:"50px",class:"q-ma-md"})])]),_:1}),e(i,null,{default:l(()=>[s("div",W,[e(o,{type:"rect",class:"q-py-md",width:"200px"})]),s("div",tt,[e(o,{type:"text",class:"q-ma-md",width:"150px"})])]),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",et,[e(o,{type:"QBtn",class:"absolute",height:"50px",width:"125px",style:{bottom:"0",left:"50px",transform:"translateY(-25px)"}}),e(o,{type:"circle",size:"60px",class:"absolute",style:{bottom:"0",right:"50px",transform:"translateY(-25px)"}})])]),_:1})]),_:1}),e(b,{class:"q-ma-lg",style:{"min-width":"340px",height:"370px"}},{default:l(()=>[e(o,{type:"circle",class:"q-ma-md",size:"20px"}),e(i,{class:"row justify-center"},{default:l(()=>[s("div",lt,[e(o,{type:"QAvatar",size:"50px",class:"q-ma-md"})])]),_:1}),e(i,null,{default:l(()=>[s("div",st,[e(o,{type:"rect",class:"q-py-md",width:"200px"})]),s("div",ot,[e(o,{type:"text",class:"q-ma-md",width:"150px"})])]),_:1}),e(g,{class:"q-px-lg justify-center"},{default:l(()=>[s("div",at,[e(o,{type:"QBtn",class:"absolute",height:"50px",width:"125px",style:{bottom:"0",left:"50px",transform:"translateY(-25px)"}}),e(o,{type:"circle",size:"60px",class:"absolute",style:{bottom:"0",right:"50px",transform:"translateY(-25px)"}})])]),_:1})]),_:1})])])]),_:1})}var rt=w(F,[["render",it]]),nt="/assets/logo_text_white.400546fc.png";const dt={name:"IndexPage",components:{IndexDashBoard:O,IndexPageSkeleton:rt},computed:{...z(j)}},ct={class:"row full-width text-center"},ut={key:0,class:"q-mx-auto",alt:"ADK Logo",src:M,style:{"max-width":"100%",height:"auto"}},mt={key:1,class:"q-mx-auto",alt:"ADK Logo",src:nt,style:{"max-width":"100%",height:"auto"}},ht={class:"column q-pa-xl self-center"},pt={class:"row"};function ft(t,a,n,m,k,_){const h=S("IndexPageSkeleton"),$=S("IndexDashBoard");return u(),q(C,null,[t.authStore.loading?(u(),f(h,{key:0})):p("",!0),t.authStore.loading?p("",!0):(u(),f(B,{key:1,class:r(["row justify-center items-center",{"bg-grey-9":t.$q.dark.isActive}]),style:{background:"linear-gradient(#ffffff, #bbbbbb)"}},{default:l(()=>[s("div",ct,[t.$q.dark.isActive?p("",!0):(u(),q("img",ut)),t.$q.dark.isActive?(u(),q("img",mt)):p("",!0)]),s("div",ht,[s("div",pt,[e($)])])]),_:1},8,["class"]))],64)}var wt=w(dt,[["render",ft]]);export{wt as default};
