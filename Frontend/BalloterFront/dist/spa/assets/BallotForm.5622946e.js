import{Q as ae}from"./QTooltip.bb21c793.js";import{d as ht,I as Xe,J as k,V as ve,f as a,L as d,a4 as f,b7 as gt,W as Tt,b5 as ut,K as S,a1 as me,b6 as dt,a5 as M,l as Ze,h as g,E as ct,aa as Zt,M as E,g as xe,m as Nt,q as At,c as q,r as ne,w as ie,aS as Et,o as It,aU as xt,aT as el,A as Rt,am as tl,a9 as Pt,ar as ll,bw as al,bx as Vt,by as _t,bz as Bt,bf as sl,z as Ft,bA as il,bB as $t,bh as Ue,Z as H,O as U,P as I,N as L,aV as ol,be as nl,ah as rl,bg as ul,b9 as dl,aJ as cl,B as mt,Y as Je,b8 as ee,S as ml,F as hl,U as gl}from"./index.0f3dcf3a.js";import{T as bl,Q as fl,c as vl,a as pl,b as yl,d as wl}from"./QLayout.2b5e7910.js";import{u as kl,c as ql,d as Ot,Q as oe,p as Fe}from"./QSelect.63be3276.js";import{u as Sl,b as $l,c as _l,_ as at,g as Cl,f as Tl,Q as Lt,a as Nl}from"./QPopupProxy.6e3de613.js";import{Q as bt}from"./QList.9eb0caa3.js";import{Q as Ht}from"./QForm.a6533fa2.js";import{Q as T,a as zt}from"./QSkeleton.953fdc16.js";import{C as Ct}from"./ClosePopup.af263d81.js";import{u as Al}from"./BallotStore.5b1c0dbb.js";import{a as Qt,Q as Fl}from"./QExpansionItem.ff0480a7.js";import{b as nt,Q as rt,a as Mt}from"./QItem.39e6fcfe.js";import{a as Pl,Q as Vl}from"./QBtnDropdown.751cb56c.js";import{Q as Bl,a as Ge,b as Ql,c as st}from"./QTabPanels.399a11ea.js";import"./position-engine.be318796.js";import"./selection.b6202499.js";import"./QChip.ab755d56.js";import"./rtl.b51694b1.js";const Ml=ht({name:"BallotFormSkeleton",computed:{mobileW(){return this.$q.platform.is.mobile?this.$q.screen.width:this.$q.screen.width/2.3},mobileH(){return this.$q.platform.is.mobile?this.$q.screen.height-50:this.$q.screen.height/1.2}}}),Dl={id:"Ballot Form Skeleton"},jl={class:"row"},El={class:"row justify-center"},Il={class:"row"},Rl={class:"col-grow"},Ol={class:"col-grow"},Ll={class:"row"},Hl={class:"col-grow"},zl={class:"col-grow"},Wl={class:"row"},Ul={class:"col-grow"},Gl={class:"col-grow"},Yl={class:"row"},Kl={class:"col-grow"},Jl={class:"col-grow"},Xl={class:"row"},Zl={class:"col-grow q-pa-sm"},xl={class:"row"},ea={class:"col-grow"},ta={class:"row"},la={class:"col-grow"},aa={class:"col-grow"},sa={class:"row"},ia={class:"col-grow"},oa={class:"row"},na={class:"col-grow"},ra={class:"row"},ua={class:"col-grow"},da={class:"col-grow"},ca={class:"col-auto q-pa-sm"},ma={class:"col-auto q-pa-sm"};function ha(e,t,s,c,i,l){return k(),ve("div",Dl,[a(zt,{class:"row justify-center items-center",style:{background:"linear-gradient(#f3f3f5, #b4b4b4)"}},{default:d(()=>[f("div",{class:M({"q-pa-lg":!e.$q.platform.is.mobile})},[f("div",jl,[a(gt,{square:"",style:Tt([{"min-width":"816px",overflow:"auto"},{maxHeight:e.mobileH+"px",minWidth:e.mobileW+"px"}])},{default:d(()=>[a(ut,null,{default:d(()=>[f("div",El,[a(T,{type:"rect",width:"200px",class:"q-ma-sm q-py-sm"})])]),_:1}),a(ut,null,{default:d(()=>[a(T,{type:"rect",width:"250px",class:"q-ma-sm q-py-sm"}),a(Ht,{class:"q-px-sm"},{default:d(()=>[f("div",Il,[f("div",Rl,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))]),f("div",Ol,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),f("div",Ll,[f("div",Hl,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))]),f("div",zl,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),f("div",Wl,[f("div",Ul,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))]),f("div",Gl,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),f("div",Yl,[f("div",Kl,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))]),f("div",Jl,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),a(me,{spaced:"",inset:""}),a(T,{type:"rect",width:"200px",class:"q-ma-sm q-py-sm"}),f("div",Xl,[f("div",Zl,[a(bt,{bordered:"",class:"rounded-borders"},{default:d(()=>[a(T,{type:"QInput",class:"q-ma-sm"}),a(T,{type:"QInput",class:"q-ma-sm"}),a(T,{type:"QInput",class:"q-ma-sm"}),a(T,{type:"QInput",class:"q-ma-sm"}),a(T,{type:"QInput",class:"q-ma-sm"}),a(T,{type:"QInput",class:"q-ma-sm"})]),_:1})])]),a(me,{spaced:"",inset:""}),a(T,{type:"rect",width:"150px",class:"q-ma-sm q-py-sm"}),f("div",xl,[f("div",ea,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",height:"200px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm",height:"200px"}))])]),f("div",ta,[f("div",la,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))]),f("div",aa,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),f("div",sa,[f("div",ia,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),f("div",oa,[f("div",na,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])]),f("div",ra,[f("div",ua,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))]),f("div",da,[e.$q.platform.is.mobile?(k(),S(T,{key:1,type:"QInput",width:"350px",class:"q-ma-sm"})):(k(),S(T,{key:0,type:"QInput",class:"q-ma-sm"}))])])]),_:1})]),_:1}),a(me,{spaced:"",inset:""}),a(dt,null,{default:d(()=>[f("div",ca,[a(T,{type:"QBtn",height:"60px",class:"q-pa-sm"})]),f("div",ma,[a(T,{type:"QBtn",height:"60px",class:"q-pa-sm"})])]),_:1})]),_:1},8,["style"])])],2)]),_:1})])}var ga=Xe(Ml,[["render",ha]]),Ke=Ze({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:t,emit:s}){const c=xe(),{proxy:{$q:i}}=c,l=u=>{s("click",u)};return()=>{if(e.props===void 0)return g("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:l},ct(t.default));let u,v;const p=c.vnode.key;if(p){if(u=e.props.colsMap[p],u===void 0)return}else u=e.props.col;if(u.sortable===!0){const h=u.align==="right"?"unshift":"push";v=Zt(t.default,[]),v[h](g(E,{class:u.__iconClass,name:i.iconSet.table.arrowUp}))}else v=ct(t.default);const o={class:u.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:u.headerStyle,onClick:h=>{u.sortable===!0&&e.props.sort(u),l(h)}};return g("th",o,v)}}});const ba=["horizontal","vertical","cell","none"];var fa=Ze({name:"QMarkupTable",props:{...Nt,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,wrapCells:Boolean,separator:{type:String,default:"horizontal",validator:e=>ba.includes(e)}},setup(e,{slots:t}){const s=xe(),c=At(e,s.proxy.$q),i=q(()=>`q-markup-table q-table__container q-table__card q-table--${e.separator}-separator`+(c.value===!0?" q-table--dark q-table__card--dark q-dark":"")+(e.dense===!0?" q-table--dense":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")+(e.square===!0?" q-table--square":"")+(e.wrapCells===!1?" q-table--no-wrap":""));return()=>g("div",{class:i.value},[g("table",{class:"q-table"},ct(t.default))])}});function Wt(e,t){return g("div",e,[g("table",{class:"q-table"},t)])}const va={list:bt,table:fa},pa=["list","table","__qtable"];var ya=Ze({name:"QVirtualScroll",props:{...kl,type:{type:String,default:"list",validator:e=>pa.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:{default:void 0}},setup(e,{slots:t,attrs:s}){let c;const i=ne(null),l=q(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:u,localResetVirtualScroll:v,padVirtualScroll:p,onVirtualScrollEvt:o}=ql({virtualScrollLength:l,getVirtualScrollTarget:R,getVirtualScrollEl:j}),h=q(()=>{if(l.value===0)return[];const G=(C,y)=>({index:u.value.from+y,item:C});return e.itemsFn===void 0?e.items.slice(u.value.from,u.value.to).map(G):e.itemsFn(u.value.from,u.value.to-u.value.from).map(G)}),b=q(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),D=q(()=>e.scrollTarget!==void 0?{}:{tabindex:0});ie(l,()=>{v()}),ie(()=>e.scrollTarget,()=>{F(),B()});function j(){return i.value.$el||i.value}function R(){return c}function B(){c=tl(j(),e.scrollTarget),c.addEventListener("scroll",o,Pt.passive)}function F(){c!==void 0&&(c.removeEventListener("scroll",o,Pt.passive),c=void 0)}function J(){let G=p(e.type==="list"?"div":"tbody",h.value.map(t.default));return t.before!==void 0&&(G=t.before().concat(G)),ll(t.after,G)}return Et(()=>{v()}),It(()=>{B()}),xt(()=>{B()}),el(()=>{F()}),Rt(()=>{F()}),()=>{if(t.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?Wt({ref:i,class:"q-table__middle "+b.value},J()):g(va[e.type],{...s,ref:i,class:[s.class,b.value],...D.value},J)}}});let Ye=0;const wa={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ka=["update:fullscreen","fullscreen"];function qa(){const e=xe(),{props:t,emit:s,proxy:c}=e;let i,l,u;const v=ne(!1);al(e)===!0&&ie(()=>c.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&h()}),ie(()=>t.fullscreen,b=>{v.value!==b&&p()}),ie(v,b=>{s("update:fullscreen",b),s("fullscreen",b)});function p(){v.value===!0?h():o()}function o(){v.value!==!0&&(v.value=!0,u=c.$el.parentNode,u.replaceChild(l,c.$el),document.body.appendChild(c.$el),Ye++,Ye===1&&document.body.classList.add("q-body--fullscreen-mixin"),i={handler:h},Vt.add(i))}function h(){v.value===!0&&(i!==void 0&&(Vt.remove(i),i=void 0),u.replaceChild(c.$el,l),v.value=!1,Ye=Math.max(0,Ye-1),Ye===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),c.$el.scrollIntoView!==void 0&&setTimeout(()=>{c.$el.scrollIntoView()})))}return Et(()=>{l=document.createElement("span")}),It(()=>{t.fullscreen===!0&&o()}),Rt(h),Object.assign(c,{toggleFullscreen:p,setFullscreen:o,exitFullscreen:h}),{inFullscreen:v,toggleFullscreen:p}}function Sa(e,t){return new Date(e)-new Date(t)}const $a={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function _a(e,t,s,c){const i=q(()=>{const{sortBy:v}=t.value;return v&&s.value.find(p=>p.name===v)||null}),l=q(()=>e.sortMethod!==void 0?e.sortMethod:(v,p,o)=>{const h=s.value.find(j=>j.name===p);if(h===void 0||h.field===void 0)return v;const b=o===!0?-1:1,D=typeof h.field=="function"?j=>h.field(j):j=>j[h.field];return v.sort((j,R)=>{let B=D(j),F=D(R);return h.rawSort!==void 0?h.rawSort(B,F,j,R)*b:B==null?-1*b:F==null?1*b:h.sort!==void 0?h.sort(B,F,j,R)*b:_t(B)===!0&&_t(F)===!0?(B-F)*b:Bt(B)===!0&&Bt(F)===!0?Sa(B,F)*b:typeof B=="boolean"&&typeof F=="boolean"?(B-F)*b:([B,F]=[B,F].map(J=>(J+"").toLocaleString().toLowerCase()),B<F?-1*b:B===F?0:b)})});function u(v){let p=e.columnSortOrder;if(sl(v)===!0)v.sortOrder&&(p=v.sortOrder),v=v.name;else{const b=s.value.find(D=>D.name===v);b!==void 0&&b.sortOrder&&(p=b.sortOrder)}let{sortBy:o,descending:h}=t.value;o!==v?(o=v,h=p==="da"):e.binaryStateSort===!0?h=!h:h===!0?p==="ad"?o=null:h=!1:p==="ad"?h=!0:o=null,c({sortBy:o,descending:h,page:1})}return{columnToSort:i,computedSortMethod:l,sort:u}}const Ca={filter:[String,Object],filterMethod:Function};function Ta(e,t){const s=q(()=>e.filterMethod!==void 0?e.filterMethod:(c,i,l,u)=>{const v=i?i.toLowerCase():"";return c.filter(p=>l.some(o=>{const h=u(o,p)+"";return(h==="undefined"||h==="null"?"":h.toLowerCase()).indexOf(v)!==-1}))});return ie(()=>e.filter,()=>{Ft(()=>{t({page:1},!0)})},{deep:!0}),{computedFilterMethod:s}}function Na(e,t){for(const s in t)if(t[s]!==e[s])return!1;return!0}function Dt(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const Aa={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function Fa(e,t){const{props:s,emit:c}=e,i=ne(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:s.rowsPerPageOptions.length!==0?s.rowsPerPageOptions[0]:5},s.pagination)),l=q(()=>{const h=s["onUpdate:pagination"]!==void 0?{...i.value,...s.pagination}:i.value;return Dt(h)}),u=q(()=>l.value.rowsNumber!==void 0);function v(h){p({pagination:h,filter:s.filter})}function p(h={}){Ft(()=>{c("request",{pagination:h.pagination||l.value,filter:h.filter||s.filter,getCellValue:t})})}function o(h,b){const D=Dt({...l.value,...h});if(Na(l.value,D)===!0){u.value===!0&&b===!0&&v(D);return}if(u.value===!0){v(D);return}s.pagination!==void 0&&s["onUpdate:pagination"]!==void 0?c("update:pagination",D):i.value=D}return{innerPagination:i,computedPagination:l,isServerSide:u,requestServerInteraction:p,setPagination:o}}function Pa(e,t,s,c,i,l){const{props:u,emit:v,proxy:{$q:p}}=e,o=q(()=>c.value===!0?s.value.rowsNumber||0:l.value),h=q(()=>{const{page:y,rowsPerPage:Q}=s.value;return(y-1)*Q}),b=q(()=>{const{page:y,rowsPerPage:Q}=s.value;return y*Q}),D=q(()=>s.value.page===1),j=q(()=>s.value.rowsPerPage===0?1:Math.max(1,Math.ceil(o.value/s.value.rowsPerPage))),R=q(()=>b.value===0?!0:s.value.page>=j.value),B=q(()=>(u.rowsPerPageOptions.includes(t.value.rowsPerPage)?u.rowsPerPageOptions:[t.value.rowsPerPage].concat(u.rowsPerPageOptions)).map(Q=>({label:Q===0?p.lang.table.allRows:""+Q,value:Q})));ie(j,(y,Q)=>{if(y===Q)return;const ke=s.value.page;y&&!ke?i({page:1}):y<ke&&i({page:y})});function F(){i({page:1})}function J(){const{page:y}=s.value;y>1&&i({page:y-1})}function G(){const{page:y,rowsPerPage:Q}=s.value;b.value>0&&y*Q<o.value&&i({page:y+1})}function C(){i({page:j.value})}return u["onUpdate:pagination"]!==void 0&&v("update:pagination",{...s.value}),{firstRowIndex:h,lastRowIndex:b,isFirstPage:D,isLastPage:R,pagesNumber:j,computedRowsPerPageOptions:B,computedRowsNumber:o,firstPage:F,prevPage:J,nextPage:G,lastPage:C}}const Va={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},Ba=["update:selected","selection"];function Qa(e,t,s,c){const i=q(()=>{const R={};return e.selected.map(c.value).forEach(B=>{R[B]=!0}),R}),l=q(()=>e.selection!=="none"),u=q(()=>e.selection==="single"),v=q(()=>e.selection==="multiple"),p=q(()=>s.value.length!==0&&s.value.every(R=>i.value[c.value(R)]===!0)),o=q(()=>p.value!==!0&&s.value.some(R=>i.value[c.value(R)]===!0)),h=q(()=>e.selected.length);function b(R){return i.value[R]===!0}function D(){t("update:selected",[])}function j(R,B,F,J){t("selection",{rows:B,added:F,keys:R,evt:J});const G=u.value===!0?F===!0?B:[]:F===!0?e.selected.concat(B):e.selected.filter(C=>R.includes(c.value(C))===!1);t("update:selected",G)}return{hasSelectionMode:l,singleSelection:u,multipleSelection:v,allRowsSelected:p,someRowsSelected:o,rowsSelectedNumber:h,isRowSelected:b,clearSelection:D,updateSelection:j}}function jt(e){return Array.isArray(e)?e.slice():[]}const Ma={expanded:Array},Da=["update:expanded"];function ja(e,t){const s=ne(jt(e.expanded));ie(()=>e.expanded,u=>{s.value=jt(u)});function c(u){return s.value.includes(u)}function i(u){e.expanded!==void 0?t("update:expanded",u):s.value=u}function l(u,v){const p=s.value.slice(),o=p.indexOf(u);v===!0?o===-1&&(p.push(u),i(p)):o!==-1&&(p.splice(o,1),i(p))}return{isRowExpanded:c,setExpanded:i,updateExpanded:l}}const Ea={visibleColumns:Array};function Ia(e,t,s){const c=q(()=>{if(e.columns!==void 0)return e.columns;const v=e.rows[0];return v!==void 0?Object.keys(v).map(p=>({name:p,label:p.toUpperCase(),field:p,align:_t(v[p])?"right":"left",sortable:!0})):[]}),i=q(()=>{const{sortBy:v,descending:p}=t.value;return(e.visibleColumns!==void 0?c.value.filter(h=>h.required===!0||e.visibleColumns.includes(h.name)===!0):c.value).map(h=>{const b=h.align||"right",D=`text-${b}`;return{...h,align:b,__iconClass:`q-table__sort-icon q-table__sort-icon--${b}`,__thClass:D+(h.headerClasses!==void 0?" "+h.headerClasses:"")+(h.sortable===!0?" sortable":"")+(h.name===v?` sorted ${p===!0?"sort-desc":""}`:""),__tdStyle:h.style!==void 0?typeof h.style!="function"?()=>h.style:h.style:()=>null,__tdClass:h.classes!==void 0?typeof h.classes!="function"?()=>D+" "+h.classes:j=>D+" "+h.classes(j):()=>D}})}),l=q(()=>{const v={};return i.value.forEach(p=>{v[p.name]=p}),v}),u=q(()=>e.tableColspan!==void 0?e.tableColspan:i.value.length+(s.value===!0?1:0));return{colList:c,computedCols:i,computedColsMap:l,computedColspan:u}}const it="q-table__bottom row items-center",Ut={};Ot.forEach(e=>{Ut[e]={}});var ot=Ze({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{default:void 0},...Ut,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Nt,...wa,...Ea,...Ca,...Aa,...Ma,...Va,...$a},emits:["request","virtualScroll",...ka,...Da,...Ba],setup(e,{slots:t,emit:s}){const c=xe(),{proxy:{$q:i}}=c,l=At(e,i),{inFullscreen:u,toggleFullscreen:v}=qa(),p=q(()=>typeof e.rowKey=="function"?e.rowKey:n=>n[e.rowKey]),o=ne(null),h=ne(null),b=q(()=>e.grid!==!0&&e.virtualScroll===!0),D=q(()=>" q-table__card"+(l.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),j=q(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":D.value)+(l.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(u.value===!0?" fullscreen scroll":"")),R=q(()=>j.value+(e.loading===!0?" q-table--loading":""));ie(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+j.value,()=>{b.value===!0&&h.value!==null&&h.value.reset()});const{innerPagination:B,computedPagination:F,isServerSide:J,requestServerInteraction:G,setPagination:C}=Fa(c,r),{computedFilterMethod:y}=Ta(e,C),{isRowExpanded:Q,setExpanded:ke,updateExpanded:Pe}=ja(e,s),K=q(()=>{let n=e.rows;if(J.value===!0||n.length===0)return n;const{sortBy:w,descending:_}=F.value;return e.filter&&(n=y.value(n,e.filter,te.value,r)),Be.value!==null&&(n=vt.value(e.rows===n?n.slice():n,w,_)),n}),et=q(()=>K.value.length),se=q(()=>{let n=K.value;if(J.value===!0)return n;const{rowsPerPage:w}=F.value;return w!==0&&(ge.value===0&&e.rows!==n?n.length>be.value&&(n=n.slice(0,be.value)):n=n.slice(ge.value,be.value)),n}),{hasSelectionMode:he,singleSelection:pe,multipleSelection:ye,allRowsSelected:qe,someRowsSelected:Z,rowsSelectedNumber:re,isRowSelected:ue,clearSelection:Se,updateSelection:$e}=Qa(e,s,se,p),{colList:ft,computedCols:te,computedColsMap:we,computedColspan:Ve}=Ia(e,F,he),{columnToSort:Be,computedSortMethod:vt,sort:Qe}=_a(e,F,ft,C),{firstRowIndex:ge,lastRowIndex:be,isFirstPage:Me,isLastPage:_e,pagesNumber:de,computedRowsPerPageOptions:De,computedRowsNumber:Ce,firstPage:je,prevPage:Ee,nextPage:Ie,lastPage:Re}=Pa(c,B,F,J,C,et),pt=q(()=>se.value.length===0),yt=q(()=>{const n={};return Ot.forEach(w=>{n[w]=e[w]}),n.virtualScrollItemSize===void 0&&(n.virtualScrollItemSize=e.dense===!0?28:48),n});function Te(){b.value===!0&&h.value.reset()}function Ne(){if(e.grid===!0)return Jt();const n=e.hideHeader!==!0?O:null;if(b.value===!0){const _=t["top-row"],N=t["bottom-row"],V={default:W=>Le(W.item,t.body,W.index)};if(_!==void 0){const W=g("tbody",_({cols:te.value}));V.before=n===null?()=>W:()=>[n()].concat(W)}else n!==null&&(V.before=n);return N!==void 0&&(V.after=()=>g("tbody",N({cols:te.value}))),g(ya,{ref:h,class:e.tableClass,style:e.tableStyle,...yt.value,scrollTarget:e.virtualScrollTarget,items:se.value,type:"__qtable",tableColspan:Ve.value,onVirtualScroll:wt},V)}const w=[He()];return n!==null&&w.unshift(n()),Wt({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},w)}function Ae(n,w){if(h.value!==null){h.value.scrollTo(n,w);return}n=parseInt(n,10);const _=o.value.querySelector(`tbody tr:nth-of-type(${n+1})`);if(_!==null){const N=o.value.querySelector(".q-table__middle.scroll"),V=_.offsetTop-e.virtualScrollStickySizeStart,W=V<N.scrollTop?"decrease":"increase";N.scrollTop=V,s("virtualScroll",{index:n,from:0,to:B.value.rowsPerPage-1,direction:W})}}function wt(n){s("virtualScroll",n)}function Oe(){return[g(Pl,{class:"q-table__linear-progress",color:e.color,dark:l.value,indeterminate:!0,trackColor:"transparent"})]}function Le(n,w,_){const N=p.value(n),V=ue(N);if(w!==void 0)return w(fe({key:N,row:n,pageIndex:_,__trClass:V?"selected":""}));const W=t["body-cell"],z=te.value.map(X=>{const tt=t[`body-cell-${X.name}`],lt=tt!==void 0?tt:W;return lt!==void 0?lt(ze({key:N,row:n,pageIndex:_,col:X})):g("td",{class:X.__tdClass(n),style:X.__tdStyle(n)},r(X,n))});if(he.value===!0){const X=t["body-selection"],tt=X!==void 0?X(kt({key:N,row:n,pageIndex:_})):[g($t,{modelValue:V,color:e.color,dark:l.value,dense:e.dense,"onUpdate:modelValue":(lt,Xt)=>{$e([N],[n],lt,Xt)}})];z.unshift(g("td",{class:"q-table--col-auto-width"},tt))}const ce={key:N,class:{selected:V}};return e.onRowClick!==void 0&&(ce.class["cursor-pointer"]=!0,ce.onClick=X=>{s("RowClick",X,n,_)}),e.onRowDblclick!==void 0&&(ce.class["cursor-pointer"]=!0,ce.onDblclick=X=>{s("RowDblclick",X,n,_)}),e.onRowContextmenu!==void 0&&(ce.class["cursor-pointer"]=!0,ce.onContextmenu=X=>{s("RowContextmenu",X,n,_)}),g("tr",ce,z)}function He(){const n=t.body,w=t["top-row"],_=t["bottom-row"];let N=se.value.map((V,W)=>Le(V,n,W));return w!==void 0&&(N=w({cols:te.value}).concat(N)),_!==void 0&&(N=N.concat(_({cols:te.value}))),g("tbody",N)}function fe(n){return We(n),n.cols=n.cols.map(w=>Ue({...w},"value",()=>r(w,n.row))),n}function ze(n){return We(n),Ue(n,"value",()=>r(n.col,n.row)),n}function kt(n){return We(n),n}function We(n){Object.assign(n,{cols:te.value,colsMap:we.value,sort:Qe,rowIndex:ge.value+n.pageIndex,color:e.color,dark:l.value,dense:e.dense}),he.value===!0&&Ue(n,"selected",()=>ue(n.key),(w,_)=>{$e([n.key],[n.row],w,_)}),Ue(n,"expand",()=>Q(n.key),w=>{Pe(n.key,w)})}function r(n,w){const _=typeof n.field=="function"?n.field(w):w[n.field];return n.format!==void 0?n.format(_,w):_}const m=q(()=>({pagination:F.value,pagesNumber:de.value,isFirstPage:Me.value,isLastPage:_e.value,firstPage:je,prevPage:Ee,nextPage:Ie,lastPage:Re,inFullscreen:u.value,toggleFullscreen:v}));function $(){const n=t.top,w=t["top-left"],_=t["top-right"],N=t["top-selection"],V=he.value===!0&&N!==void 0&&re.value>0,W="q-table__top relative-position row items-center";if(n!==void 0)return g("div",{class:W},[n(m.value)]);let z;if(V===!0?z=N(m.value).slice():(z=[],w!==void 0?z.push(g("div",{class:"q-table__control"},[w(m.value)])):e.title&&z.push(g("div",{class:"q-table__control"},[g("div",{class:["q-table__title",e.titleClass]},e.title)]))),_!==void 0&&(z.push(g("div",{class:"q-table__separator col"})),z.push(g("div",{class:"q-table__control"},[_(m.value)]))),z.length!==0)return g("div",{class:W},z)}const P=q(()=>Z.value===!0?null:qe.value);function O(){const n=x();return e.loading===!0&&t.loading===void 0&&n.push(g("tr",{class:"q-table__progress"},[g("th",{class:"relative-position",colspan:Ve.value},Oe())])),g("thead",n)}function x(){const n=t.header,w=t["header-cell"];if(n!==void 0)return n(A({header:!0})).slice();const _=te.value.map(N=>{const V=t[`header-cell-${N.name}`],W=V!==void 0?V:w,z=A({col:N});return W!==void 0?W(z):g(Ke,{key:N.name,props:z},()=>N.label)});if(pe.value===!0&&e.grid!==!0)_.unshift(g("th",{class:"q-table--col-auto-width"}," "));else if(ye.value===!0){const N=t["header-selection"],V=N!==void 0?N(A({})):[g($t,{color:e.color,modelValue:P.value,dark:l.value,dense:e.dense,"onUpdate:modelValue":Y})];_.unshift(g("th",{class:"q-table--col-auto-width"},V))}return[g("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},_)]}function A(n){return Object.assign(n,{cols:te.value,sort:Qe,colsMap:we.value,color:e.color,dark:l.value,dense:e.dense}),ye.value===!0&&Ue(n,"selected",()=>P.value,Y),n}function Y(n){Z.value===!0&&(n=!1),$e(se.value.map(p.value),se.value,n)}const le=q(()=>{const n=[e.iconFirstPage||i.iconSet.table.firstPage,e.iconPrevPage||i.iconSet.table.prevPage,e.iconNextPage||i.iconSet.table.nextPage,e.iconLastPage||i.iconSet.table.lastPage];return i.lang.rtl===!0?n.reverse():n});function qt(){if(e.hideBottom===!0)return;if(pt.value===!0){if(e.hideNoData===!0)return;const _=e.loading===!0?e.loadingLabel||i.lang.table.loading:e.filter?e.noResultsLabel||i.lang.table.noResults:e.noDataLabel||i.lang.table.noData,N=t["no-data"],V=N!==void 0?[N({message:_,icon:i.iconSet.table.warning,filter:e.filter})]:[g(E,{class:"q-table__bottom-nodata-icon",name:i.iconSet.table.warning}),_];return g("div",{class:it+" q-table__bottom--nodata"},V)}const n=t.bottom;if(n!==void 0)return g("div",{class:it},[n(m.value)]);const w=e.hideSelectedBanner!==!0&&he.value===!0&&re.value>0?[g("div",{class:"q-table__control"},[g("div",[(e.selectedRowsLabel||i.lang.table.selectedRecords)(re.value)])])]:[];if(e.hidePagination!==!0)return g("div",{class:it+" justify-end"},Yt(w));if(w.length!==0)return g("div",{class:it},w)}function St(n){C({page:1,rowsPerPage:n.value})}function Yt(n){let w;const{rowsPerPage:_}=F.value,N=e.paginationLabel||i.lang.table.pagination,V=t.pagination,W=e.rowsPerPageOptions.length>1;if(n.push(g("div",{class:"q-table__separator col"})),W===!0&&n.push(g("div",{class:"q-table__control"},[g("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||i.lang.table.recordsPerPage]),g(oe,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:_,options:De.value,displayValue:_===0?i.lang.table.allRows:_,dark:l.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":St})])),V!==void 0)w=V(m.value);else if(w=[g("span",_!==0?{class:"q-table__bottom-item"}:{},[_?N(ge.value+1,Math.min(be.value,Ce.value),Ce.value):N(1,et.value,Ce.value)])],_!==0&&de.value>1){const z={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(z.size="sm"),de.value>2&&w.push(g(H,{key:"pgFirst",...z,icon:le.value[0],disable:Me.value,onClick:je})),w.push(g(H,{key:"pgPrev",...z,icon:le.value[1],disable:Me.value,onClick:Ee}),g(H,{key:"pgNext",...z,icon:le.value[2],disable:_e.value,onClick:Ie})),de.value>2&&w.push(g(H,{key:"pgLast",...z,icon:le.value[3],disable:_e.value,onClick:Re}))}return n.push(g("div",{class:"q-table__control"},w)),n}function Kt(){const n=e.gridHeader===!0?[g("table",{class:"q-table"},[O()])]:e.loading===!0&&t.loading===void 0?Oe():void 0;return g("div",{class:"q-table__middle"},n)}function Jt(){const n=t.item!==void 0?t.item:w=>{const _=w.cols.map(V=>g("div",{class:"q-table__grid-item-row"},[g("div",{class:"q-table__grid-item-title"},[V.label]),g("div",{class:"q-table__grid-item-value"},[V.value])]));if(he.value===!0){const V=t["body-selection"],W=V!==void 0?V(w):[g($t,{modelValue:w.selected,color:e.color,dark:l.value,dense:e.dense,"onUpdate:modelValue":(z,ce)=>{$e([w.key],[w.row],z,ce)}})];_.unshift(g("div",{class:"q-table__grid-item-row"},W),g(me,{dark:l.value}))}const N={class:["q-table__grid-item-card"+D.value,e.cardClass],style:e.cardStyle};return(e.onRowClick!==void 0||e.onRowDblclick!==void 0)&&(N.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(N.onClick=V=>{s("RowClick",V,w.row,w.pageIndex)}),e.onRowDblclick!==void 0&&(N.onDblclick=V=>{s("RowDblclick",V,w.row,w.pageIndex)})),g("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(w.selected===!0?" q-table__grid-item--selected":"")},[g("div",N,_)])};return g("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},se.value.map((w,_)=>n(fe({key:p.value(w),row:w,pageIndex:_}))))}return Object.assign(c.proxy,{requestServerInteraction:G,setPagination:C,firstPage:je,prevPage:Ee,nextPage:Ie,lastPage:Re,isRowSelected:ue,clearSelection:Se,isRowExpanded:Q,setExpanded:ke,sort:Qe,resetVirtualScroll:Te,scrollTo:Ae,getCellValue:r}),il(c.proxy,{filteredSortedRows:()=>K.value,computedRows:()=>se.value,computedRowsNumber:()=>Ce.value}),()=>{const n=[$()],w={ref:o,class:R.value};return e.grid===!0?n.push(Kt()):Object.assign(w,{class:[w.class,e.cardClass],style:e.cardStyle}),n.push(Ne(),qt()),e.loading===!0&&t.loading!==void 0&&n.push(t.loading()),g("div",w,n)}}});const Ra=ht({name:"BotaView",props:["category"],emits:["toggle-category","get-points","get-standout-categories"],data:function(){return{tab:"",pointToggle1:"",pointToggle2:"",pointToggle3:"",pointToggle4:"",points:[],contentRows:[],strategyRows:[],styleRows:[],cqRows:[],content:[],strategy:[],style:[],cq:[]}},mounted(){this.loadData()},methods:{onColCLick(e,t){let s=Math.round((Number(e.split("-")[0])+Number(e.split("-")[1]))/2),c=!0;this.points.forEach(i=>{i.category==t&&(i.points=s,c=!1)}),c&&this.points.push({points:s,category:t}),this.category=="Style"&&(e+="S"),this.updateCategoryToggle(t,e),this.emitPoints()},updateCategoryToggle(e,t){switch(e){case 1:this.pointToggle1=t;break;case 2:this.pointToggle2=t;break;case 3:this.pointToggle3=t;break;case 4:this.pointToggle4=t;break}},emitPoints(){let e=0;this.points.forEach(s=>{e+=s.points});let t=Math.round(e/this.points.length);e=Math.round((e+t*(4-this.points.length))/4),this.emitStandoutCategories(t),this.$emit("get-points",e)},emitStandoutCategories(e){let t=[],s=Math.abs(this.points[0].points-e);this.points.forEach(c=>{Math.abs(c.points-e)>s&&(s=Math.abs(c.points-e),t.push(c))}),this.$emit("get-standout-categories",t)},toggleCategory(e){this.$emit("toggle-category",e)},loadData(){this.content=[this.$t("bota.category.content.analysis.title"),this.$t("bota.category.content.proving.title"),this.$t("bota.category.content.impacts.title"),this.$t("bota.category.content.reactions.title")],this.strategy=[this.$t("bota.category.strategy.structure.title"),this.$t("bota.category.strategy.timeWork.title"),this.$t("bota.category.strategy.teamWork.title"),this.$t("bota.category.strategy.roleFulfillment.title")],this.style=[this.$t("bota.category.style.language.title"),this.$t("bota.category.style.voice.title"),this.$t("bota.category.style.gestures.title"),this.$t("bota.category.style.eyeContact.title")],this.contentRows=[[{"36-40":this.$t("bota.category.content.analysis.high"),"32-35":this.$t("bota.category.content.analysis.midHigh"),"28-31":this.$t("bota.category.content.analysis.medium"),"24-27":this.$t("bota.category.content.analysis.midLow"),"20-23":this.$t("bota.category.content.analysis.low")}],[{"36-40":this.$t("bota.category.content.proving.high"),"32-35":this.$t("bota.category.content.proving.midHigh"),"28-31":this.$t("bota.category.content.proving.medium"),"24-27":this.$t("bota.category.content.proving.midLow"),"20-23":this.$t("bota.category.content.proving.low")}],[{"36-40":this.$t("bota.category.content.impacts.high"),"32-35":this.$t("bota.category.content.impacts.midHigh"),"28-31":this.$t("bota.category.content.impacts.medium"),"24-27":this.$t("bota.category.content.impacts.midLow"),"20-23":this.$t("bota.category.content.impacts.low")}],[{"36-40":this.$t("bota.category.content.reactions.high"),"32-35":this.$t("bota.category.content.reactions.midHigh"),"28-31":this.$t("bota.category.content.reactions.medium"),"24-27":this.$t("bota.category.content.reactions.midLow"),"20-23":this.$t("bota.category.content.reactions.low")}]],this.strategyRows=[[{"27-30":this.$t("bota.category.strategy.structure.high"),"24-26":this.$t("bota.category.strategy.structure.midHigh"),"21-23":this.$t("bota.category.strategy.structure.medium"),"18-20":this.$t("bota.category.strategy.structure.midLow"),"15-17":this.$t("bota.category.strategy.structure.low")}],[{"27-30":this.$t("bota.category.strategy.timeWork.high"),"24-26":this.$t("bota.category.strategy.timeWork.midHigh"),"21-23":this.$t("bota.category.strategy.timeWork.medium"),"18-20":this.$t("bota.category.strategy.timeWork.midLow"),"15-17":this.$t("bota.category.strategy.timeWork.low")}],[{"27-30":this.$t("bota.category.strategy.teamWork.high"),"24-26":this.$t("bota.category.strategy.teamWork.midHigh"),"21-23":this.$t("bota.category.strategy.teamWork.medium"),"18-20":this.$t("bota.category.strategy.teamWork.midLow"),"15-17":this.$t("bota.category.strategy.teamWork.low")}],[{"27-30":this.$t("bota.category.strategy.roleFulfillment.high"),"24-26":this.$t("bota.category.strategy.roleFulfillment.midHigh"),"21-23":this.$t("bota.category.strategy.roleFulfillment.medium"),"18-20":this.$t("bota.category.strategy.roleFulfillment.midLow"),"15-17":this.$t("bota.category.strategy.roleFulfillment.low")}]],this.styleRows=[[{"27-30":this.$t("bota.category.style.language.high"),"24-26":this.$t("bota.category.style.language.midHigh"),"21-23":this.$t("bota.category.style.language.medium"),"18-20":this.$t("bota.category.style.language.midLow"),"15-17":this.$t("bota.category.style.language.low")}],[{"27-30":this.$t("bota.category.style.voice.high"),"24-26":this.$t("bota.category.style.voice.midHigh"),"21-23":this.$t("bota.category.style.voice.medium"),"18-20":this.$t("bota.category.style.voice.midLow"),"15-17":this.$t("bota.category.style.voice.low")}],[{"27-30":this.$t("bota.category.style.gestures.high"),"24-26":this.$t("bota.category.style.gestures.midHigh"),"21-23":this.$t("bota.category.style.gestures.medium"),"18-20":this.$t("bota.category.style.gestures.midLow"),"15-17":this.$t("bota.category.style.gestures.low")}],[{"27-30":this.$t("bota.category.style.eyeContact.high"),"24-26":this.$t("bota.category.style.eyeContact.midHigh"),"21-23":this.$t("bota.category.style.eyeContact.medium"),"18-20":this.$t("bota.category.style.eyeContact.midLow"),"15-17":this.$t("bota.category.style.eyeContact.low")}]]}},computed:{getCategory(){let e=[],t=[];switch(this.category){case"Cont":e=this.content,t=this.contentRows;break;case"Str":e=this.strategy,t=this.strategyRows;break;case"Style":e=this.style,t=this.styleRows;break}return{title:e,rows:t}},langChange(){return this.$i18n.locale}},watch:{langChange(){this.loadData()},category(e,t){e!=t&&(this.points=[],this.tab="1")}}}),Oa={class:"col-grow"};function La(e,t,s,c,i,l){return k(),ve("div",Oa,[a(gt,{flat:"",bordered:"",class:"q-ma-sm"},{default:d(()=>[a(Bl,{modelValue:e.tab,"onUpdate:modelValue":t[4]||(t[4]=u=>e.tab=u),dense:"","active-color":"light-blue-13","indicator-color":"light-blue-13","mobile-arrows":"",stretch:""},{default:d(()=>[a(Vl,{"auto-close":"",flat:""},{default:d(()=>[a(bt,{dense:""},{default:d(()=>[a(nt,{clickable:"",onClick:t[0]||(t[0]=u=>e.toggleCategory("Cont"))},{default:d(()=>[a(rt,null,{default:d(()=>[U(I(e.$t("bota.category.content.title")),1)]),_:1})]),_:1}),a(nt,{clickable:"",onClick:t[1]||(t[1]=u=>e.toggleCategory("Str"))},{default:d(()=>[a(rt,null,{default:d(()=>[U(I(e.$t("bota.category.strategy.title")),1)]),_:1})]),_:1}),a(nt,{clickable:"",onClick:t[2]||(t[2]=u=>e.toggleCategory("Style"))},{default:d(()=>[a(rt,null,{default:d(()=>[U(I(e.$t("bota.category.style.title")),1)]),_:1})]),_:1})]),_:1})]),_:1}),a(Ge,{name:"1",label:e.getCategory.title[0]},{default:d(()=>[e.category!="Style"?(k(),S(ae,{key:0},{default:d(()=>[U(I(e.category=="Cont"?e.$t("bota.tooltips.content.analysis"):e.$t("bota.tooltips.strategy.structure")),1)]),_:1})):L("",!0)]),_:1},8,["label"]),a(Ge,{name:"2",label:e.getCategory.title[1]},{default:d(()=>[e.category!="Style"?(k(),S(ae,{key:0},{default:d(()=>[U(I(e.category=="Cont"?e.$t("bota.tooltips.content.proving"):e.$t("bota.tooltips.strategy.timeWork")),1)]),_:1})):L("",!0)]),_:1},8,["label"]),a(Ge,{name:"3",label:e.getCategory.title[2]},{default:d(()=>[e.category=="Str"?(k(),S(ae,{key:0},{default:d(()=>[U(I(e.category=="Cont"?"":e.$t("bota.tooltips.strategy.teamWork")),1)]),_:1})):L("",!0)]),_:1},8,["label"]),a(Ge,{name:"4",label:e.getCategory.title[3]},{default:d(()=>[e.category!="Style"?(k(),S(ae,{key:0},{default:d(()=>[U(I(e.category=="Cont"?e.$t("bota.tooltips.content.reactions"):e.$t("bota.tooltips.strategy.roleFulfillment")),1)]),_:1})):L("",!0)]),_:1},8,["label"]),a(Ge,{icon:"close",onClick:t[3]||(t[3]=u=>e.toggleCategory(null))},{default:d(()=>[a(ae,null,{default:d(()=>[U(I(e.$t("bota.tooltips.close")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(me),a(Ql,{modelValue:e.tab,"onUpdate:modelValue":t[5]||(t[5]=u=>e.tab=u),animated:""},{default:d(()=>[a(st,{name:"1"},{default:d(()=>[a(ot,{"hide-pagination":"",flat:"",rows:e.getCategory.rows[0],"row-key":"name","auto-width":"","table-header-style":"","wrap-cells":"",separator:"vertical"},{"header-cell":d(u=>[a(Ke,null,{default:d(()=>[a(H,{flat:"",color:e.category=="Style"?e.pointToggle1==u.col.name+"S"?"orange-13":"light-blue-13":e.pointToggle1==u.col.name?"orange-13":"light-blue-13",onClick:v=>e.onColCLick(u.col.name,1),label:u.col.label},null,8,["color","onClick","label"])]),_:2},1024)]),_:1},8,["rows"])]),_:1}),a(st,{name:"2"},{default:d(()=>[a(ot,{"hide-pagination":"",flat:"",rows:e.getCategory.rows[1],"row-key":"name","auto-width":"","table-header-style":"","wrap-cells":"",separator:"vertical"},{"header-cell":d(u=>[a(Ke,null,{default:d(()=>[a(H,{flat:"",color:e.category=="Style"?e.pointToggle2==u.col.name+"S"?"orange-13":"light-blue-13":e.pointToggle2==u.col.name?"orange-13":"light-blue-13",onClick:v=>e.onColCLick(u.col.name,2),label:u.col.label},null,8,["color","onClick","label"])]),_:2},1024)]),default:d(()=>[U(" >")]),_:1},8,["rows"])]),_:1}),a(st,{name:"3"},{default:d(()=>[a(ot,{"hide-pagination":"",flat:"",rows:e.getCategory.rows[2],"row-key":"name","auto-width":"","table-header-style":"","wrap-cells":"",separator:"vertical"},{"header-cell":d(u=>[a(Ke,null,{default:d(()=>[a(H,{flat:"",color:e.category=="Style"?e.pointToggle3==u.col.name+"S"?"orange-13":"light-blue-13":e.pointToggle3==u.col.name?"orange-13":"light-blue-13",onClick:v=>e.onColCLick(u.col.name,3),label:u.col.label},null,8,["color","onClick","label"])]),_:2},1024)]),_:1},8,["rows"])]),_:1}),a(st,{name:"4"},{default:d(()=>[a(ot,{"hide-pagination":"",flat:"",rows:e.getCategory.rows[3],"row-key":"name","auto-width":"","table-header-style":"","wrap-cells":"",separator:"vertical"},{"header-cell":d(u=>[a(Ke,null,{default:d(()=>[a(H,{flat:"",color:e.category=="Style"?e.pointToggle4==u.col.name+"S"?"orange-13":"light-blue-13":e.pointToggle4==u.col.name?"orange-13":"light-blue-13",onClick:v=>e.onColCLick(u.col.name,4),label:u.col.label},null,8,["color","onClick","label"])]),_:2},1024)]),_:1},8,["rows"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])}var Ha=Xe(Ra,[["render",La]]);function za(e,t){if(e.hour!==null){if(e.minute===null)return"minute";if(t===!0&&e.second===null)return"second"}return"hour"}function Wa(){const e=new Date;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}}var Ua=Ze({name:"QTime",props:{...Nt,...ol,...Sl,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:$l,setup(e,{slots:t,emit:s}){const c=xe(),{$q:i}=c.proxy,l=At(e,i),{tabindex:u,headerClass:v,getLocale:p,getCurrentDate:o}=_l(e,i),h=nl(e),b=ul(h);let D,j;const R=ne(null),B=q(()=>vt()),F=q(()=>p()),J=q(()=>Qe()),G=at(e.modelValue,B.value,F.value,e.calendar,J.value),C=ne(za(G)),y=ne(G),Q=ne(G.hour===null||G.hour<12),ke=q(()=>`q-time q-time--${e.landscape===!0?"landscape":"portrait"}`+(l.value===!0?" q-time--dark q-dark":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-time--readonly":"")+(e.bordered===!0?" q-time--bordered":"")+(e.square===!0?" q-time--square no-border-radius":"")+(e.flat===!0?" q-time--flat no-shadow":"")),Pe=q(()=>{const r=y.value;return{hour:r.hour===null?"--":K.value===!0?Fe(r.hour):String(Q.value===!0?r.hour===0?12:r.hour:r.hour>12?r.hour-12:r.hour),minute:r.minute===null?"--":Fe(r.minute),second:r.second===null?"--":Fe(r.second)}}),K=q(()=>e.format24h!==null?e.format24h:i.lang.date.format24h),et=q(()=>{const r=C.value==="hour",m=r===!0?12:60,$=y.value[C.value];let O=`rotate(${Math.round($*(360/m))-180}deg) translateX(-50%)`;return r===!0&&K.value===!0&&y.value.hour>=12&&(O+=" scale(.7)"),{transform:O}}),se=q(()=>y.value.hour!==null),he=q(()=>se.value===!0&&y.value.minute!==null),pe=q(()=>e.hourOptions!==void 0?r=>e.hourOptions.includes(r):e.options!==void 0?r=>e.options(r,null,null):null),ye=q(()=>e.minuteOptions!==void 0?r=>e.minuteOptions.includes(r):e.options!==void 0?r=>e.options(y.value.hour,r,null):null),qe=q(()=>e.secondOptions!==void 0?r=>e.secondOptions.includes(r):e.options!==void 0?r=>e.options(y.value.hour,y.value.minute,r):null),Z=q(()=>{if(pe.value===null)return null;const r=we(0,11,pe.value),m=we(12,11,pe.value);return{am:r,pm:m,values:r.values.concat(m.values)}}),re=q(()=>ye.value!==null?we(0,59,ye.value):null),ue=q(()=>qe.value!==null?we(0,59,qe.value):null),Se=q(()=>{switch(C.value){case"hour":return Z.value;case"minute":return re.value;case"second":return ue.value}}),$e=q(()=>{let r,m,$=0,P=1;const O=Se.value!==null?Se.value.values:void 0;C.value==="hour"?K.value===!0?(r=0,m=23):(r=0,m=11,Q.value===!1&&($=12)):(r=0,m=55,P=5);const x=[];for(let A=r,Y=r;A<=m;A+=P,Y++){const le=A+$,qt=O!==void 0&&O.includes(le)===!1,St=C.value==="hour"&&A===0?K.value===!0?"00":"12":A;x.push({val:le,index:Y,disable:qt,label:St})}return x}),ft=q(()=>[[bl,Me,void 0,{stop:!0,prevent:!0,mouse:!0}]]);ie(()=>e.modelValue,r=>{const m=at(r,B.value,F.value,e.calendar,J.value);(m.dateHash!==y.value.dateHash||m.timeHash!==y.value.timeHash)&&(y.value=m,m.hour===null?C.value="hour":Q.value=m.hour<12)}),ie([B,F],()=>{Ft(()=>{ze()})});function te(){const r={...o(),...Wa()};ze(r),Object.assign(y.value,r),C.value="hour"}function we(r,m,$){const P=Array.apply(null,{length:m+1}).map((O,x)=>{const A=x+r;return{index:A,val:$(A)===!0}}).filter(O=>O.val===!0).map(O=>O.index);return{min:P[0],max:P[P.length-1],values:P,threshold:m+1}}function Ve(r,m,$){const P=Math.abs(r-m);return Math.min(P,$-P)}function Be(r,{min:m,max:$,values:P,threshold:O}){if(r===m)return m;if(r<m||r>$)return Ve(r,m,O)<=Ve(r,$,O)?m:$;const x=P.findIndex(le=>r<=le),A=P[x-1],Y=P[x];return r-A<=Y-r?A:Y}function vt(){return e.calendar!=="persian"&&e.mask!==null?e.mask:`HH:mm${e.withSeconds===!0?":ss":""}`}function Qe(){if(typeof e.defaultDate!="string"){const r=o(!0);return r.dateHash=Cl(r),r}return at(e.defaultDate,"YYYY/MM/DD",void 0,e.calendar)}function ge(){return dl(c)===!0||Se.value!==null&&(Se.value.values.length===0||C.value==="hour"&&K.value!==!0&&Z.value[Q.value===!0?"am":"pm"].values.length===0)}function be(){const r=R.value,{top:m,left:$,width:P}=r.getBoundingClientRect(),O=P/2;return{top:m+O,left:$+O,dist:O*.7}}function Me(r){if(ge()!==!0){if(r.isFirst===!0){D=be(),j=de(r.evt,D);return}j=de(r.evt,D,j),r.isFinal===!0&&(D=!1,j=null,_e())}}function _e(){C.value==="hour"?C.value="minute":e.withSeconds&&C.value==="minute"&&(C.value="second")}function de(r,m,$){const P=rl(r),O=Math.abs(P.top-m.top),x=Math.sqrt(Math.pow(Math.abs(P.top-m.top),2)+Math.pow(Math.abs(P.left-m.left),2));let A,Y=Math.asin(O/x)*(180/Math.PI);if(P.top<m.top?Y=m.left<P.left?90-Y:270+Y:Y=m.left<P.left?Y+90:270-Y,C.value==="hour"){if(A=Y/30,Z.value!==null){const le=K.value!==!0?Q.value===!0:Z.value.am.values.length!==0&&Z.value.pm.values.length!==0?x>=m.dist:Z.value.am.values.length!==0;A=Be(A+(le===!0?0:12),Z.value[le===!0?"am":"pm"])}else A=Math.round(A),K.value===!0?x<m.dist?A<12&&(A+=12):A===12&&(A=0):Q.value===!0&&A===12?A=0:Q.value===!1&&A!==12&&(A+=12);K.value===!0&&(Q.value=A<12)}else A=Math.round(Y/6)%60,C.value==="minute"&&re.value!==null?A=Be(A,re.value):C.value==="second"&&ue.value!==null&&(A=Be(A,ue.value));return $!==A&&wt[C.value](A),A}const De={hour(){C.value="hour"},minute(){C.value="minute"},second(){C.value="second"}};function Ce(r){r.keyCode===13&&Oe()}function je(r){r.keyCode===13&&Le()}function Ee(r){ge()!==!0&&(i.platform.is.desktop!==!0&&de(r,be()),_e())}function Ie(r){ge()!==!0&&de(r,be())}function Re(r){if(r.keyCode===13)C.value="hour";else if([37,39].includes(r.keyCode)){const m=r.keyCode===37?-1:1;if(Z.value!==null){const $=K.value===!0?Z.value.values:Z.value[Q.value===!0?"am":"pm"].values;if($.length===0)return;if(y.value.hour===null)Te($[0]);else{const P=($.length+$.indexOf(y.value.hour)+m)%$.length;Te($[P])}}else{const $=K.value===!0?24:12,P=K.value!==!0&&Q.value===!1?12:0,O=y.value.hour===null?-m:y.value.hour;Te(P+(24+O+m)%$)}}}function pt(r){if(r.keyCode===13)C.value="minute";else if([37,39].includes(r.keyCode)){const m=r.keyCode===37?-1:1;if(re.value!==null){const $=re.value.values;if($.length===0)return;if(y.value.minute===null)Ne($[0]);else{const P=($.length+$.indexOf(y.value.minute)+m)%$.length;Ne($[P])}}else{const $=y.value.minute===null?-m:y.value.minute;Ne((60+$+m)%60)}}}function yt(r){if(r.keyCode===13)C.value="second";else if([37,39].includes(r.keyCode)){const m=r.keyCode===37?-1:1;if(ue.value!==null){const $=ue.value.values;if($.length===0)return;if(y.value.seconds===null)Ae($[0]);else{const P=($.length+$.indexOf(y.value.second)+m)%$.length;Ae($[P])}}else{const $=y.value.second===null?-m:y.value.second;Ae((60+$+m)%60)}}}function Te(r){y.value.hour!==r&&(y.value.hour=r,fe())}function Ne(r){y.value.minute!==r&&(y.value.minute=r,fe())}function Ae(r){y.value.second!==r&&(y.value.second=r,fe())}const wt={hour:Te,minute:Ne,second:Ae};function Oe(){Q.value===!1&&(Q.value=!0,y.value.hour!==null&&(y.value.hour-=12,fe()))}function Le(){Q.value===!0&&(Q.value=!1,y.value.hour!==null&&(y.value.hour+=12,fe()))}function He(r){const m=e.modelValue;C.value!==r&&m!==void 0&&m!==null&&m!==""&&typeof m!="string"&&(C.value=r)}function fe(){if(pe.value!==null&&pe.value(y.value.hour)!==!0){y.value=at(),He("hour");return}if(ye.value!==null&&ye.value(y.value.minute)!==!0){y.value.minute=null,y.value.second=null,He("minute");return}if(e.withSeconds===!0&&qe.value!==null&&qe.value(y.value.second)!==!0){y.value.second=null,He("second");return}y.value.hour===null||y.value.minute===null||e.withSeconds===!0&&y.value.second===null||ze()}function ze(r){const m=Object.assign({...y.value},r),$=e.calendar==="persian"?Fe(m.hour)+":"+Fe(m.minute)+(e.withSeconds===!0?":"+Fe(m.second):""):Tl(new Date(m.year,m.month===null?null:m.month-1,m.day,m.hour,m.minute,m.second,m.millisecond),B.value,F.value,m.year,m.timezoneOffset);m.changed=$!==e.modelValue,s("update:modelValue",$,m)}function kt(){const r=[g("div",{class:"q-time__link "+(C.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:De.hour,onKeyup:Re},Pe.value.hour),g("div",":"),g("div",se.value===!0?{class:"q-time__link "+(C.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onKeyup:pt,onClick:De.minute}:{class:"q-time__link"},Pe.value.minute)];e.withSeconds===!0&&r.push(g("div",":"),g("div",he.value===!0?{class:"q-time__link "+(C.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onKeyup:yt,onClick:De.second}:{class:"q-time__link"},Pe.value.second));const m=[g("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},r)];return K.value===!1&&m.push(g("div",{class:"q-time__header-ampm column items-between no-wrap"},[g("div",{class:"q-time__link "+(Q.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:Oe,onKeyup:Ce},"AM"),g("div",{class:"q-time__link "+(Q.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:u.value,onClick:Le,onKeyup:je},"PM")])),g("div",{class:"q-time__header flex flex-center no-wrap "+v.value},m)}function We(){const r=y.value[C.value];return g("div",{class:"q-time__content col relative-position"},[g(cl,{name:"q-transition--scale"},()=>g("div",{key:"clock"+C.value,class:"q-time__container-parent absolute-full"},[g("div",{ref:R,class:"q-time__container-child fit overflow-hidden"},[mt(g("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:Ee,onMousedown:Ie},[g("div",{class:"q-time__clock-circle fit"},[g("div",{class:"q-time__clock-pointer"+(y.value[C.value]===null?" hidden":e.color!==void 0?` text-${e.color}`:""),style:et.value}),$e.value.map(m=>g("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${m.index}`+(m.val===r?" q-time__clock-position--active "+v.value:m.disable===!0?" q-time__clock-position--disable":"")},[g("span",m.label)]))])]),ft.value)])])),e.nowBtn===!0?g(H,{class:"q-time__now-button absolute",icon:i.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:e.color,textColor:e.textColor,tabindex:u.value,onClick:te}):null])}return c.proxy.setNow=te,()=>{const r=[We()],m=ct(t.default);return m!==void 0&&r.push(g("div",{class:"q-time__actions"},m)),e.name!==void 0&&e.disable!==!0&&b(r,"push"),g("div",{class:ke.value,tabindex:-1},[kt(),g("div",{class:"q-time__main col overflow-auto"},r)])}}});const Ga=ht({name:"StopWatch",props:["speach","dense","stopWatch","toggle","innitData"],emits:["tick"],data:function(){return{time:0,proxyTime:"",speaches:{},timerMode:null,timer:void 0,started:!1,SWMode:!1}},created(){this.loadValues(),this.setTimerMode(),this.setStopWatchMode(),this.innitData!=null&&(this.time=this.innitData)},methods:{loadValues(){let e=60;const t={Speach:6*e,NPrep:7*e,CQ:3*e,APrep:5*e,ThirdSpeach:5*e};let s="lime-6",c="orange-13";this.speaches={APrep:{title:this.$t("ballotF.stopwatch.prepA"),limit:t.APrep,color:s},NPrep:{title:this.$t("ballotF.stopwatch.prepN"),limit:t.NPrep,color:c},A1:{title:this.$t("ballotF.stopwatch.A1"),limit:t.Speach,color:s},A2:{title:this.$t("ballotF.stopwatch.A2"),limit:t.Speach,color:s},A3:{title:this.$t("ballotF.stopwatch.A3"),limit:t.ThirdSpeach,color:s},N1:{title:this.$t("ballotF.stopwatch.N1"),limit:t.Speach,color:c},N2:{title:this.$t("ballotF.stopwatch.N2"),limit:t.Speach,color:c},N3:{title:this.$t("ballotF.stopwatch.N3"),limit:t.ThirdSpeach,color:c},N3xA1:{title:this.$t("ballotF.stopwatch.N3xA1"),limit:t.CQ,color:s},A3xN1:{title:this.$t("ballotF.stopwatch.A3xN1"),limit:t.CQ,color:c},N1xA2:{title:this.$t("ballotF.stopwatch.N1xA2"),limit:t.CQ,color:s},A1xN2:{title:this.$t("ballotF.stopwatch.A1xN2"),limit:t.CQ,color:c}}},setTimerMode(){if(this.speach!=null)switch(this.speach){case"APrep":this.timerMode=this.speaches.APrep;break;case"NPrep":this.timerMode=this.speaches.NPrep;break;case"A1":this.timerMode=this.speaches.A1;break;case"A2":this.timerMode=this.speaches.A2;break;case"A3":this.timerMode=this.speaches.A3;break;case"N1":this.timerMode=this.speaches.N1;break;case"N2":this.timerMode=this.speaches.N2;break;case"N3":this.timerMode=this.speaches.N3;break;case"N3xA1":this.timerMode=this.speaches.N3xA1;break;case"A3xN1":this.timerMode=this.speaches.A3xN1;break;case"N1xA2":this.timerMode=this.speaches.N1xA2;break;case"A1xN2":this.timerMode=this.speaches.A1xN2;break}},setStopWatchMode(){this.SWMode=this.stopWatch,this.SWMode?this.time=0:this.timerMode!=null&&(this.time=this.timerMode.limit)},startCounting(){this.started||(this.timer=setInterval(()=>{this.SWMode?this.time++:this.time--},1e3)),this.started=!0},stopCounting(){clearInterval(this.timer),this.started=!1,this.emitTime()},emitTime(){let e=this.time;if(this.SWMode&&this.outOfTime!=""&&(e=e*-1),this.timerMode!=null){const t={limit:this.timerMode.limit,time:e,speach:this.speach,color:this.timerMode.color,running:this.started};this.$emit("tick",t)}},updateProxy(){const e=new Date;e.setMinutes(0),e.setHours(0),e.setSeconds(this.time);const t=new Intl.DateTimeFormat("cs",{hour:"2-digit",minute:"2-digit",second:"2-digit"});this.proxyTime=t.format(e)},save(){let e=Number(this.proxyTime.split(":")[0])*60*60+Number(this.proxyTime.split(":")[1])*60+Number(this.proxyTime.split(":")[2]);this.time=e},colorAdjust(){var t;let e=(t=this.timerMode)==null?void 0:t.color;return e=="lime-6"&&this.$q.dark.isActive==!1&&this.dense==!0?"light-blue-13":e}},computed:{formattedTime(){const e=new Date;let t="";return e.setMinutes(0),e.setHours(0),e.setSeconds(this.time),e.getHours()>0&&(t=e.getHours()+" : "+e.getMinutes()+" : "+e.getSeconds()),e.getMinutes()>0?t=e.getMinutes()+" : "+e.getSeconds():t=e.getSeconds().toString(),this.SWMode&&this.outOfTime!=""&&(t="-"+t),t},outOfTime(){let e="";return this.speach!="APrep"&&this.speach!="NPrep"&&(e="silver"),this.stopWatch?this.timerMode!=null&&this.time>=this.timerMode.limit&&(e="#C10015"):this.time<=0&&(e="#C10015"),e},langChange(){return this.$i18n.locale},toggleTimer(){return this.toggle}},watch:{time(e){this.SWMode||e==0&&(this.SWMode=!0),this.emitTime()},langChange(){this.loadValues(),this.setTimerMode()},toggleTimer(){this.started?this.stopCounting():this.startCounting()}}}),Ya={class:"row items-center justify-end q-gutter-sm"};function Ka(e,t,s,c,i,l){return k(),S(gt,{flat:"",bordered:"",dark:e.speach=="APrep"||e.speach=="NPrep"?!e.$q.dark.isActive:!!e.$q.dark.isActive,class:M(["q-ma-xs q-mx-sm",e.speach=="APrep"||e.speach=="NPrep"?e.$q.dark.isActive?"bg-black":"bg-dark":e.$q.dark.isActive?"bg-dark":""]),style:Tt({borderColor:e.outOfTime})},{default:d(()=>[a(ut,{horizontal:""},{default:d(()=>[a(dt,{horizontal:"",class:"justify-around"},{default:d(()=>[a(H,{dense:e.dense,outline:"",round:"",icon:"play_arrow",onClick:t[0]||(t[0]=u=>e.startCounting())},null,8,["dense"])]),_:1}),a(Qt),a(nt,{dense:e.dense},{default:d(()=>[a(rt,null,{default:d(()=>[a(Mt,{style:{cursor:"pointer"}},{default:d(()=>[U(I(e.formattedTime)+" ",1),a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.stopwatch.tooltip")),1)]),_:1}),a(Lt,{onBeforeShow:e.updateProxy,cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>{var u;return[a(Ua,{modelValue:e.proxyTime,"onUpdate:modelValue":t[1]||(t[1]=v=>e.proxyTime=v),color:(u=e.timerMode)==null?void 0:u.color,"text-color":"black","with-seconds":"",mask:"HH:mm:ss"},{default:d(()=>[f("div",Ya,[mt(a(H,{label:e.$t("ballotF.stopwatch.timePicker.cancel"),color:"light-blue-13",flat:""},null,8,["label"]),[[Ct]]),mt(a(H,{label:e.$t("ballotF.stopwatch.timePicker.ok"),color:"light-blue-13",flat:"",onClick:e.save},null,8,["label","onClick"]),[[Ct]])])]),_:1},8,["modelValue","color"])]}),_:1},8,["onBeforeShow"])]),_:1}),a(Mt,{caption:"",class:M("text-"+e.colorAdjust())},{default:d(()=>{var u;return[U(I((u=e.timerMode)==null?void 0:u.title),1)]}),_:1},8,["class"])]),_:1})]),_:1},8,["dense"]),a(Qt),a(dt,{horizontal:"",class:"justify-around items-center"},{default:d(()=>[a(H,{dense:e.dense,outline:"",round:"",icon:"pause",onClick:t[2]||(t[2]=u=>e.stopCounting())},null,8,["dense"])]),_:1})]),_:1})]),_:1},8,["dark","class","style"])}var Gt=Xe(Ga,[["render",Ka]]);const Ja=ht({name:"BallotSpeaker",components:{BotaView:Ha,StopWatch:Gt},props:["speaker","team","id","innitData","toggleTimer","toggleCQTimer","timerData","timerCQData"],emits:["get-values","timer-tick","timer-CQ-tick"],data:function(){return{num_refresh_rate:500,text_refresh_rate:1e3,botaToggle:null,person:null,comment_char_goal:150,comment:"",comment_hint:"",cont_points:20,cont_bool:!1,cq_points:"0",sum_points:0,str_points:15,str_bool:!1,style_points:15,style_bool:!1,loading:!0,commentArr:[]}},created(){this.loadInitValues(),this.emitValues()},methods:{loadInitValues(){this.loading=!0,this.innitData!=null&&this.innitData.role==this.speaker&&(this.person=this.innitData.person_id,this.comment=this.innitData.comment,this.cont_points=Number(this.innitData.cont_points),this.str_points=Number(this.innitData.str_points),this.style_points=Number(this.innitData.style_points),this.sum_points=Number(this.innitData.cont_points)+Number(this.innitData.str_points)+Number(this.innitData.cq_points)+Number(this.innitData.style_points),Number(this.innitData.cq_points)>0?this.cq_points="+"+this.innitData.cq_points:this.cq_points=this.innitData.cq_points),this.loading=!1},emitValues(){var s;Number(this.cq_points)>100&&(this.cq_points="100");let e;this.person!=null&&(e=this.person);const t={person_id:e,id:(s=this.person)==null?void 0:s.id,role:this.speaker,comment:this.comment,cont_points:this.cont_points,str_points:this.str_points,style_points:this.style_points,cq_points:Number(this.cq_points),author:0,best_speaker:0};this.$emit("get-values",t)},cqCalculation(){if(this.cq_points.includes("+")||this.cq_points.includes("-")||this.cq_points=="0")this.sum_points=this.getSpeakerPointSum();else if(this.cont_bool&&this.str_bool&&this.style_bool){let e=Number(this.cont_points)+Number(this.str_points)+Number(this.style_points);e=Math.round(e/5-10);let t=e-5,s=Number(this.cq_points)-5;t-s<0&&(this.cq_points="+"+Math.round(Math.abs(t-s)/2).toString()),t-s>0&&(this.cq_points="-"+Math.round(Math.abs(t-s)/2).toString()),t-s==0&&(this.cq_points="0"),this.sum_points=this.getSpeakerPointSum()}},toggleBotaCategories(e){this.botaToggle==e?this.botaToggle=null:this.botaToggle=e},getBotaPoints(e){switch(this.botaToggle){case"Cont":this.cont_points=e,this.cont_bool=!0;break;case"Str":this.str_points=e,this.str_bool=!0;break;case"Style":this.style_points=e,this.style_bool=!0;break}this.getSpeakerPointSum()},commentAdvice(e){let t="",s="",c="",i="";if(this.comment.length==0&&e.length!=0){switch(t=this.$t("ballotF.speakers.advice.title"),this.botaToggle){case"Cont":s="Cont",c=this.$t("ballotF.speakers.advice.content.title"),e.forEach(l=>{switch(l.category){case 1:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.content.analysis")+l.points+this.$t("ballotF.speakers.advice.points");break;case 2:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.content.proving")+l.points+this.$t("ballotF.speakers.advice.points");break;case 3:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.content.impacts")+l.points+this.$t("ballotF.speakers.advice.points");break;case 4:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.content.reactions")+l.points+this.$t("ballotF.speakers.advice.points");break}}),this.sentenceInsert(s,c,i),s="",c="",i="";break;case"Str":s="Str",c=this.$t("ballotF.speakers.advice.strategy.title"),e.forEach(l=>{switch(l.category){case 1:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.strategy.structure")+l.points+this.$t("ballotF.speakers.advice.points");break;case 2:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.strategy.timeWork")+l.points+this.$t("ballotF.speakers.advice.points");break;case 3:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.strategy.teamWork")+l.points+this.$t("ballotF.speakers.advice.points");break;case 4:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.strategy.roleFulfillment")+l.points+this.$t("ballotF.speakers.advice.points");break}}),this.sentenceInsert(s,c,i),s="",c="",i="";break;case"Style":s="Style",c=this.$t("ballotF.speakers.advice.style.title"),e.forEach(l=>{switch(l.category){case 1:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.style.language")+l.points+this.$t("ballotF.speakers.advice.points");break;case 2:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.style.voice")+l.points+this.$t("ballotF.speakers.advice.points");break;case 3:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.style.gestures")+l.points+this.$t("ballotF.speakers.advice.points");break;case 4:i.length!=0&&(i+=", "),i+=this.$t("ballotF.speakers.advice.style.eyeContact")+l.points+this.$t("ballotF.speakers.advice.points");break}}),this.sentenceInsert(s,c,i),s="",c="",i="";break}this.comment_hint=t,this.commentArr.forEach(l=>{this.comment_hint+=l.content+l.subcontent})}},sentenceInsert(e,t,s){let c=!1;if(this.commentArr.forEach(i=>{i.category==e&&(i.content=`
- `+t,i.subcontent=s,c=!0)}),!c){const i={category:e,content:`
- `+t,subcontent:s};this.commentArr.push(i)}},getSpeakerPointSum(){return Number(this.cont_points)+Number(this.str_points)+Number(this.cq_points)+Number(this.style_points)},hasError(e){let t=!1;if(!this.loading)try{t=this.$refs[e].hasError}catch{}return t},getCQRole(){switch(this.speaker){case"A1":return"A1xN2";case"N1":return"N1xA2";case"A3":return"A3xN1";case"N3":return"N3xA1"}}}}),Xa={class:"row justify-center"},Za={class:"col-grow"},xa={key:0,class:"col-grow justify-center text-center"},es={key:0,class:"row justify-center"},ts={class:"col-grow justify-center text-center"},ls={class:"col-grow justify-center text-center"},as={class:"row"},ss={class:"col-grow"},is={class:"row"},os={class:"col-grow"},ns={class:"col-grow"},rs={class:"col-grow"},us={class:"col-grow"},ds={class:"col-grow"},cs={key:1,class:"row justify-center"};function ms(e,t,s,c,i,l){var p,o;const u=Je("StopWatch"),v=Je("BotaView");return k(),S(Fl,{label:e.$t("ballotF.speakers."+e.speaker),caption:e.person==null?"":((p=e.person)==null?void 0:p.name)+" "+((o=e.person)==null?void 0:o.surname),"header-class":"text-h6"},{default:d(()=>{var h;return[f("div",Xa,[f("div",Za,[a(oe,{style:{"min-width":"250px"},class:"q-pa-sm",ref:"person",outlined:"",modelValue:e.person,"onUpdate:modelValue":[t[0]||(t[0]=b=>e.person=b),t[1]||(t[1]=b=>e.emitValues())],label:e.$t("ballotF.speakers.speaker")+" "+e.$t("ballotF.speakers."+e.speaker),options:(h=e.team)==null?void 0:h.team_members,"option-label":b=>b==null?"":b.name+" "+b.surname},{prepend:d(()=>[a(E,{name:"badge"})]),_:1},8,["modelValue","label","options","option-label"])]),e.speaker=="A2"||e.speaker=="N2"?(k(),ve("div",xa,[a(u,{class:"q-mt-sm q-pb-xs",dense:!0,speach:e.speaker,toggle:e.toggleTimer,innitData:e.timerData,onTick:t[2]||(t[2]=b=>e.$emit("timer-tick",b))},null,8,["speach","toggle","innitData"])])):L("",!0)]),e.speaker!="A2"&&e.speaker!="N2"?(k(),ve("div",es,[f("div",ts,[a(u,{class:"q-mt-sm q-pb-xs",dense:!0,speach:e.speaker,toggle:e.toggleTimer,innitData:e.timerData,onTick:t[3]||(t[3]=b=>e.$emit("timer-tick",b))},null,8,["speach","toggle","innitData"])]),f("div",ls,[a(u,{class:"q-mt-sm q-pb-xs",dense:!0,speach:e.getCQRole(),toggle:e.toggleCQTimer,innitData:e.timerCQData,onTick:t[4]||(t[4]=b=>e.$emit("timer-CQ-tick",b))},null,8,["speach","toggle","innitData"])])])):L("",!0),f("div",as,[f("div",ss,[a(ee,{class:"q-pa-sm q-mb-md",ref:"comment",outlined:"","bottom-slots":"",modelValue:e.comment,"onUpdate:modelValue":[t[5]||(t[5]=b=>e.comment=b),t[6]||(t[6]=b=>e.emitValues())],type:"textarea",label:e.$t("ballotF.speakers.comment"),"shadow-text":e.comment.length==0?e.comment_hint:"","lazy-rules":"",rules:[e.$rules.required],debounce:e.text_refresh_rate},{prepend:d(()=>[a(E,{name:"comment"})]),hint:d(()=>[e.comment.length<e.comment_char_goal&&e.comment.length>0?(k(),S(E,{key:0,name:"more_horiz",size:"50px",style:{transform:"translateY(-20px)"}})):L("",!0),e.comment.length==0?(k(),S(E,{key:1,name:"close",size:"25px",style:{transform:"translateY(-8px)"},color:"negative"})):L("",!0),e.comment.length>=e.comment_char_goal?(k(),S(E,{key:2,name:"done",size:"25px",style:{transform:"translateY(-8px)"},color:"positive"})):L("",!0)]),counter:d(()=>[f("p",{class:M({"text-negative":e.comment.length<e.comment_char_goal,"text-positive":e.comment.length>=e.comment_char_goal})},I(e.comment.length-e.comment_char_goal),3)]),_:1},8,["modelValue","label","shadow-text","rules","debounce"])])]),f("div",is,[f("div",os,[a(ee,{class:M(["q-pa-sm",e.hasError("cont_points")?"q-pb-xl":""]),style:{"max-width":"150px"},ref:"cont_points",outlined:"",modelValue:e.cont_points,"onUpdate:modelValue":[t[8]||(t[8]=b=>e.cont_points=b),t[9]||(t[9]=b=>(e.sum_points=e.getSpeakerPointSum(),e.loading||(e.cont_bool=!0),e.cqCalculation(),e.emitValues()))],type:"number",label:e.$t("ballotF.speakers.content"),"lazy-rules":"",rules:[e.$rules.noLetters,e.$rules.contPoints],debounce:e.num_refresh_rate},{append:d(()=>[a(H,{onClick:t[7]||(t[7]=b=>e.toggleBotaCategories("Cont")),icon:"help",flat:"",round:"",dense:""},{default:d(()=>[a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.speakers.tooltip.content")),1)]),_:1})]),_:1})]),_:1},8,["class","modelValue","label","rules","debounce"])]),f("div",ns,[a(ee,{class:M(["q-pa-sm",e.hasError("str_points")?"q-pb-xl":""]),style:{"max-width":"150px"},ref:"str_points",outlined:"",modelValue:e.str_points,"onUpdate:modelValue":[t[11]||(t[11]=b=>e.str_points=b),t[12]||(t[12]=b=>(e.sum_points=e.getSpeakerPointSum(),e.loading||(e.str_bool=!0),e.cqCalculation(),e.emitValues()))],type:"number",label:e.$t("ballotF.speakers.strategy"),"lazy-rules":"",rules:[e.$rules.noLetters,e.$rules.strPoints],debounce:e.num_refresh_rate},{append:d(()=>[a(H,{onClick:t[10]||(t[10]=b=>e.toggleBotaCategories("Str")),icon:"help",flat:"",round:"",dense:""},{default:d(()=>[a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.speakers.tooltip.strategy")),1)]),_:1})]),_:1})]),_:1},8,["class","modelValue","label","rules","debounce"])]),f("div",rs,[a(ee,{class:M(["q-pa-sm",e.hasError("style_points")?"q-pb-xl":""]),style:{"max-width":"150px"},ref:"style_points",outlined:"",modelValue:e.style_points,"onUpdate:modelValue":[t[14]||(t[14]=b=>e.style_points=b),t[15]||(t[15]=b=>(e.sum_points=e.getSpeakerPointSum(),e.loading||(e.style_bool=!0),e.cqCalculation(),e.emitValues()))],type:"number",label:e.$t("ballotF.speakers.style"),"lazy-rules":"",rules:[e.$rules.noLetters,e.$rules.stylePoints],debounce:e.num_refresh_rate},{append:d(()=>[a(H,{onClick:t[13]||(t[13]=b=>e.toggleBotaCategories("Style")),icon:"help",flat:"",round:"",dense:""},{default:d(()=>[a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.speakers.tooltip.style")),1)]),_:1})]),_:1})]),_:1},8,["class","modelValue","label","rules","debounce"])]),f("div",us,[a(ee,{class:M(["q-pa-sm",e.hasError("cq_points")?"q-pb-xl":""]),style:{"max-width":"150px"},ref:"cq_points",outlined:"",modelValue:e.cq_points,"onUpdate:modelValue":[t[16]||(t[16]=b=>e.cq_points=b),t[17]||(t[17]=b=>(e.cqCalculation(),e.emitValues()))],type:"text",label:e.$t("ballotF.speakers.cq"),"lazy-rules":"",rules:[e.$rules.isCq,e.$rules.cqPoints],debounce:e.num_refresh_rate},{append:d(()=>[a(H,{icon:"help",flat:"",round:"",dense:""},{default:d(()=>[a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.speakers.tooltip.cq")),1)]),_:1})]),_:1})]),_:1},8,["class","modelValue","label","rules","debounce"])]),f("div",ds,[a(ee,{class:M(["q-pa-sm",e.hasError("sum_points")?"q-pb-xl":""]),style:{"max-width":"150px"},ref:"sum_points",outlined:"",readonly:"",modelValue:e.sum_points,"onUpdate:modelValue":t[18]||(t[18]=b=>e.sum_points=b),type:"number",label:e.$t("ballotF.speakers.sum"),"lazy-rules":"",rules:[]},null,8,["class","modelValue","label"])])]),e.botaToggle!=null?(k(),ve("div",cs,[a(v,{category:e.botaToggle,onToggleCategory:e.toggleBotaCategories,onGetPoints:e.getBotaPoints,onGetStandoutCategories:e.commentAdvice},null,8,["category","onToggleCategory","onGetPoints","onGetStandoutCategories"])])):L("",!0)]}),_:1},8,["label","caption"])}var hs=Xe(Ja,[["render",ms]]);const gs={name:"BallotForm",props:["id"],components:{BallotFormSkeleton:ga,BallotSpeaker:hs,StopWatch:Gt},async created(){var e,t;this.authStore.user===null&&this.$router.push({path:"/auth/0"}),this.Adjudicator={id:(e=this.authStore.user)==null?void 0:e.person.id,role:"Adjudicator",comment:"",cont_points:0,str_points:0,style_points:0,cq_points:0,best_speaker:0,author:1,person_id:(t=this.authStore.user)==null?void 0:t.person},this.ballotStore.motions.length==0&&await this.loadMotions(),this.ballotStore.teams.length==0&&await this.loadTeams(),this.ballotStore.tournaments.length==0&&await this.loadTournaments(),this.fillStartingValues()},data:function(){return{loading:!0,decision_char_goal:300,text_refresh_rate:1e3,tournament:null,date:"",place:"",adj_name:"",adj_surname:"",motion:null,team_AFF:null,team_NEG:null,decision:"",adj_winning_team:null,winning_team:null,adjudications:"",best_speaker:null,Adjudicator:null,A1:null,A2:null,A3:null,N1:null,N2:null,N3:null,order:[],timerToggle:!1,timer:null,currentTime:0,timers:null,showPrepTimeTimers:!1,init:!0,set:!1,icon:""}},methods:{async submit(){var t,s,c,i,l;var e=this.findBallot(this.id);if(this.id!=0&&e!=null&&((t=this.authStore.user)==null?void 0:t.person.id)===((s=this.author(e))==null?void 0:s.id)&&(((c=this.authStore.user)==null?void 0:c.role.id)=="1"||((i=this.authStore.user)==null?void 0:i.role.id)=="2")||this.id==0){let u=!1;if(await this.$refs.ballotForm.validate().then(v=>{v||(u=!0,this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballotF.submit.validate.failure")}))}),!u)if(this.A1!=null&&this.A1.person_id!=null&&this.A2!=null&&this.A2.person_id!=null&&this.A3!=null&&this.A3.person_id!=null&&this.N1!=null&&this.N1.person_id!=null&&this.N2!=null&&this.N2.person_id!=null&&this.N3!=null&&this.N3.person_id!=null&&this.Adjudicator!=null&&this.Adjudicator.person_id!=null){switch((l=this.best_speaker)==null?void 0:l.id){case this.A1.id:this.A1.best_speaker=1;break;case this.A2.id:this.A2.best_speaker=1;break;case this.A3.id:this.A3.best_speaker=1;break;case this.N1.id:this.N1.best_speaker=1;break;case this.N2.id:this.N2.best_speaker=1;break;case this.N3.id:this.N3.best_speaker=1;break}this.tournament!=null&&this.motion!=null&&this.team_AFF!=null&&this.team_NEG!=null&&this.adj_winning_team!=null&&this.winning_team!=null&&await this.ballotStore.createOrUpdateBallot(Number(this.id),this.tournament,this.date,this.motion,this.team_AFF,this.team_NEG,this.decision,this.adj_winning_team,this.winning_team,this.adjudications,this.Adjudicator,this.A1,this.A2,this.A3,this.N1,this.N2,this.N3)?(this.$q.notify({icon:"done",color:"positive",message:this.$t("ballotF.submit.success")}),this.deleteSavedBallot(),this.$router.push({path:"/ballot/0"})):this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballotF.submit.failure")})}else this.$q.dialog({title:this.$t("ballotF.submit.warning.title"),message:this.$t("ballotF.submit.warning.speakerMessage"),ok:{flat:!0,color:"light-blue-13"}})}else this.$q.dialog({title:this.$t("ballotF.submit.warning.title"),message:this.$t("ballotF.submit.warning.message"),ok:{flat:!0,color:"light-blue-13"}})},async loadMotions(){await this.ballotStore.loadMotions()||this.$q.notify({icon:"warning",color:"negative",message:this.$t("motion.load.failure")})},async loadTeams(){await this.ballotStore.loadTeams()||this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballotF.teams.failure")})},async loadTournaments(){await this.ballotStore.loadTournaments()||this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballotF.tournaments.failure")})},fillStartingValues(){var t,s,c;if(this.loading=!0,this.id==0&&(this.authStore.user!==null&&(this.authStore.user.role.id=="1"||this.authStore.user.role.id=="2")&&(this.adj_name=this.authStore.user.person.name,this.adj_surname=this.authStore.user.person.surname),this.ballotStore.ballot!=null?(this.date=this.ballotStore.ballot.Ballot.date,this.place=this.ballotStore.ballot.Ballot.place):this.date=new Date(Date.now()).toISOString().substring(0,10)),this.id!=0||this.ballotStore.ballot!=null){var e=null;this.ballotStore.ballot!=null?(e=this.ballotStore.ballot,this.best_speaker=e==null?void 0:e.Ballot.best_speaker):e=this.findBallot(this.id),e!=null&&((t=this.authStore.user)==null?void 0:t.person.id)===((s=this.author(e))==null?void 0:s.id)&&(this.date=e.Ballot.date,this.tournament=e.Ballot.tournament,this.place=(c=e.Ballot.tournament)==null?void 0:c.institution.name,this.motion=e.Ballot.motion,this.team_AFF=e.Ballot.team_AFF,this.team_NEG=e.Ballot.team_NEG,this.decision=e.Ballot.decision,this.adj_winning_team=e.Ballot.adj_winning_team,this.winning_team=e.Ballot.winning_team,this.adjudications=e.Ballot.adjucations,e==null||e.People.forEach(i=>{i!=null&&i.best_speaker==1&&(this.best_speaker=i.person_id),i!=null&&i.role=="Adjudicator"&&(this.adj_name=i.person_id.name,this.adj_surname=i.person_id.surname),this.getSpeakerValues(i)}),e.Timers!=null&&(this.timers={APrep:e.Timers.APrep,NPrep:e.Timers.NPrep,A1:e.Timers.A1,A2:e.Timers.A1,A3:e.Timers.A1,N1:e.Timers.N1,N2:e.Timers.N2,N3:e.Timers.N2,N3xA1:e.Timers.N3xA1,A3xN1:e.Timers.A3xN1,N1xA2:e.Timers.N1xA2,A1xN2:e.Timers.A1xN2}))}this.timers==null&&(this.timers={APrep:null,NPrep:null,A1:null,A2:null,A3:null,N1:null,N2:null,N3:null,N3xA1:null,A3xN1:null,N1xA2:null,A1xN2:null}),this.timer={label:"A1",index:0,color:"lime-6"},this.order=["A1","NPrep","N3xA1","NPrep","N1","APrep","A3xN1","APrep","A2","NPrep","N1xA2","NPrep","N2","APrep","A1xN2","APrep","A3","NPrep","N3"],this.loading=!1,this.saveBallot()},author(e){var t=null;return e.People.forEach(s=>{s!=null&&s.author==1&&(t=s.person_id)}),t},findBallot(e){var t=null;for(const s of this.ballotStore.ballots)if(s.Ballot.id==e){t=s;break}return t},saveBallot(){const e={Ballot:{tournament:this.tournament,id:this.id,date:this.date,motion:this.motion,team_AFF:this.team_AFF,team_NEG:this.team_NEG,decision:this.decision,adj_winning_team:this.adj_winning_team,winning_team:this.winning_team,adjucations:this.adjudications,adj_name:this.adj_name,adj_surname:this.adj_surname,best_speaker:this.best_speaker,place:this.place},People:[this.Adjudicator,this.A1,this.A2,this.A3,this.N1,this.N2,this.N3],Timers:this.timers};this.loading||(this.ballotStore.savedBallot=JSON.stringify(e),localStorage.setItem("ballot",JSON.stringify(e)))},deleteSavedBallot(){this.loading=!0,this.ballotStore.savedBallot=null,localStorage.removeItem("ballot")},getSpeakerValues(e){if(e!=null)switch(e.role){case"A1":this.A1=e;break;case"A2":this.A2=e;break;case"A3":this.A3=e;break;case"N1":this.N1=e;break;case"N2":this.N2=e;break;case"N3":this.N3=e;break}},hasError(e){let t=!1;if(!this.loading)try{t=this.$refs[e].hasError}catch{}return t},getTime(e){this.timer!=null?(e.running&&(this.init=!1),e.speach==this.timer.label?(this.setToggle(e.running),this.currentTime=e.time,this.timer.color=e.color):this.init||(this.setToggle(e.running),this.timer.index=this.getTimerIndex(e.speach),this.timer.label=e.speach),this.timers!=null&&(this.timers[e.speach]=e.time)):this.timer={label:"A1",index:0,color:"lime-6"}},setToggle(e){e?this.icon="pause":this.icon="play_arrow",this.set||(this.timerToggle=e,this.set=!0)},getTimer(e,t){let s=Number(e+Number(t+"1"));s<0&&(s=this.order.length-1),s>this.order.length-1&&(s=0),this.timer!=null&&(this.timer.label=this.order[s],this.timer.index=s)},getTimerIndex(e){return this.order.findIndex(t=>t==e)},toggleTimer(e){if(this.timer==null)return!1;let t=!1;return e==this.timer.label&&(t=!0),this.timerToggle&&t}},computed:{...ml(gl,Al),getTournamentTeams(){var e=[];return this.ballotStore.teams.length!==0?this.tournament!=null?(this.ballotStore.teams.forEach(t=>{t.events.forEach(s=>{var c;s.id===((c=this.tournament)==null?void 0:c.id)&&e.push(t)})}),e):this.ballotStore.teams:e},getSpeakers(){var t,s;var e=[];return this.team_AFF!=null&&this.team_NEG!=null&&(e=e.concat((t=this.team_AFF)==null?void 0:t.team_members,(s=this.team_NEG)==null?void 0:s.team_members)),e},getTeamAPointSum(){var e,t,s,c,i,l,u,v,p,o,h,b;return Number(Number((e=this.A1)==null?void 0:e.cont_points)+Number((t=this.A1)==null?void 0:t.str_points)+Number((s=this.A1)==null?void 0:s.style_points)+Number((c=this.A1)==null?void 0:c.cq_points))+Number(Number((i=this.A2)==null?void 0:i.cont_points)+Number((l=this.A2)==null?void 0:l.str_points)+Number((u=this.A2)==null?void 0:u.style_points)+Number((v=this.A2)==null?void 0:v.cq_points))+Number(Number((p=this.A3)==null?void 0:p.cont_points)+Number((o=this.A3)==null?void 0:o.str_points)+Number((h=this.A3)==null?void 0:h.style_points)+Number((b=this.A3)==null?void 0:b.cq_points))},getTeamNPointSum(){var e,t,s,c,i,l,u,v,p,o,h,b;return Number(Number((e=this.N1)==null?void 0:e.cont_points)+Number((t=this.N1)==null?void 0:t.str_points)+Number((s=this.N1)==null?void 0:s.style_points)+Number((c=this.N1)==null?void 0:c.cq_points))+Number(Number((i=this.N2)==null?void 0:i.cont_points)+Number((l=this.N2)==null?void 0:l.str_points)+Number((u=this.N2)==null?void 0:u.style_points)+Number((v=this.N2)==null?void 0:v.cq_points))+Number(Number((p=this.N3)==null?void 0:p.cont_points)+Number((o=this.N3)==null?void 0:o.str_points)+Number((h=this.N3)==null?void 0:h.style_points)+Number((b=this.N3)==null?void 0:b.cq_points))},formattedTime(){const e=new Date;let t="";return e.setMinutes(0),e.setHours(0),e.setSeconds(this.currentTime),e.getHours()>0&&(t=e.getHours()+" : "+e.getMinutes()+" : "+e.getSeconds()),e.getMinutes()>0?t=e.getMinutes()+" : "+e.getSeconds():t=e.getSeconds().toString(),t},mobileW(){return this.$q.platform.is.mobile?this.$q.screen.width:this.$q.screen.width/2.3},mobileH(){return this.$q.platform.is.mobile?this.$q.screen.height-50:this.$q.screen.height/1.2}}},bs={key:1,id:"Ballot Form"},fs={class:"col"},vs={class:"row justify-center"},ps={class:"q-my-xs text-body2 text-white q-ml-xs"},ys={class:"text-h7 q-my-xs"},ws={class:"row"},ks={class:"col-grow"},qs={class:"col-grow"},Ss={class:"row"},$s={class:"col-grow"},_s={class:"row items-center justify-end"},Cs={class:"col-grow"},Ts={class:"row"},Ns={class:"col-grow"},As={class:"col-grow"},Fs={class:"row"},Ps={class:"col-grow"},Vs={class:"col-grow"},Bs={class:"text-h7 q-my-xs"},Qs={class:"row"},Ms={class:"col-grow q-pa-sm"},Ds={class:"text-h7 q-my-xs"},js={class:"row"},Es={class:"col-grow"},Is={class:"row"},Rs={class:"col-grow"},Os={class:"col-grow"},Ls={class:"row"},Hs={class:"col-grow"},zs={class:"row"},Ws={class:"col-grow"},Us={class:"row"},Gs={class:"col-grow"},Ys={class:"col-grow"},Ks={class:"col-auto q-pa-sm"},Js={class:"col-auto q-pa-sm"};function Xs(e,t,s,c,i,l){const u=Je("BallotFormSkeleton"),v=Je("StopWatch"),p=Je("BallotSpeaker");return k(),ve(hl,null,[e.authStore.isLoading||e.ballotStore.isLoading?(k(),S(u,{key:0})):L("",!0),!e.authStore.isLoading&&!e.ballotStore.isLoading?(k(),ve("div",bs,[a(zt,{class:M(["row justify-center items-center",{"bg-grey-9":e.$q.dark.isActive}]),style:{background:"linear-gradient(#f3f3f5, #b4b4b4)"}},{default:d(()=>[e.authStore.user!=null?(k(),ve("div",{key:0,class:M({"q-pa-lg":!e.$q.platform.is.mobile})},[a(fl,{view:"hHh lpR fFf",container:"","items-center":"",class:M(["bg-white text-dark",{"shadow-24":!e.$q.dark.isActive,"q-pa-lg":!e.$q.platform.is.mobile}]),style:Tt([{"min-width":"816px"},{minWidth:l.mobileW+"px",minHeight:l.mobileH+"px"}])},{default:d(()=>[a(vl,{class:M(["bg-dark text-center",{"bg-black":e.$q.dark.isActive}]),elevated:!e.$q.platform.is.mobile&&!e.$q.dark.isActive},{default:d(()=>[a(pl,{class:M(e.$q.screen.width<1630?"column":"")},{default:d(()=>[e.loading?L("",!0):(k(),S(v,{key:0,hidden:e.$q.screen.width<1630&&!e.showPrepTimeTimers,speach:"APrep",toggle:l.toggleTimer("APrep"),innitData:e.timers!=null?e.timers.APrep:null,onTick:l.getTime},null,8,["hidden","toggle","innitData","onTick"])),a(yl,null,{default:d(()=>{var o,h;return[f("div",fs,[f("h4",{class:"text-h5 text-white text-center q-my-sm",style:{cursor:"pointer"},onClick:t[0]||(t[0]=b=>e.showPrepTimeTimers=!e.showPrepTimeTimers)},[U(I(e.$t("ballotF.title"))+" ",1),a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.tooltip")),1)]),_:1})]),a(me,{dark:"",inset:""}),f("div",vs,[a(H,{dense:"",flat:"",size:"10px",color:"white",icon:"skip_previous",onClick:t[1]||(t[1]=b=>(e.timer!=null&&l.getTimer(e.timer.index,"-"),e.init=!1))}),f("div",{class:M(["q-my-xs text-body2","text-"+((o=e.timer)==null?void 0:o.color)])},I(((h=e.timer)==null?void 0:h.label)+" - "),3),f("div",ps,I(l.formattedTime),1),a(H,{dense:"",flat:"",size:"10px",color:"white",icon:e.icon,onClick:t[2]||(t[2]=b=>e.timerToggle=!e.timerToggle)},null,8,["icon"]),a(H,{dense:"",flat:"",size:"10px",color:"white",icon:"skip_next",onClick:t[3]||(t[3]=b=>(e.timer!=null&&l.getTimer(e.timer.index,"+"),e.init=!1))})])])]}),_:1}),e.loading?L("",!0):(k(),S(v,{key:1,hidden:e.$q.screen.width<1630&&!e.showPrepTimeTimers,speach:"NPrep",toggle:l.toggleTimer("NPrep"),innitData:e.timers!=null?e.timers.NPrep:null,onTick:l.getTime},null,8,["hidden","toggle","innitData","onTick"]))]),_:1},8,["class"])]),_:1},8,["class","elevated"]),a(wl,null,{default:d(()=>[a(gt,{square:""},{default:d(()=>[a(ut,null,{default:d(()=>[f("h6",ys,I(e.$t("ballotF.basicInfo.title")),1),a(Ht,{class:"q-px-sm",ref:"ballotForm"},{default:d(()=>[f("div",ws,[f("div",ks,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("tournament")?"q-pb-md":""]),ref:"tournament",outlined:"",modelValue:e.tournament,"onUpdate:modelValue":[t[4]||(t[4]=o=>e.tournament=o),t[5]||(t[5]=o=>(e.tournament==null||(e.place=e.tournament.institution.name),l.saveBallot()))],label:e.$t("ballotF.basicInfo.tournament"),options:e.ballotStore.tournaments,"option-label":o=>o==null?"":o.name},{prepend:d(()=>[a(E,{name:"emoji_events"})]),_:1},8,["class","modelValue","label","options","option-label"])]),f("div",qs,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("motion")?"q-pb-md":""]),ref:"motion",outlined:"",modelValue:e.motion,"onUpdate:modelValue":[t[6]||(t[6]=o=>e.motion=o),t[7]||(t[7]=o=>l.saveBallot())],label:e.$t("ballotF.basicInfo.motion"),options:e.ballotStore.motions,"option-label":o=>o==null?"":o.name},{prepend:d(()=>[a(E,{name:"history_edu"})]),_:1},8,["class","modelValue","label","options","option-label"])])]),f("div",Ss,[f("div",$s,[a(ee,{class:M(["q-pa-sm",l.hasError("date")?"q-pb-md":""]),outlined:"",ref:"date",modelValue:e.date,"onUpdate:modelValue":[t[9]||(t[9]=o=>e.date=o),t[10]||(t[10]=o=>l.saveBallot())],"lazy-rules":"",rules:[e.$rules.isDate],label:e.$t("ballotF.basicInfo.date")},{prepend:d(()=>[a(E,{name:"event",class:"cursor-pointer"},{default:d(()=>[a(Lt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[a(Nl,{modelValue:e.date,"onUpdate:modelValue":t[8]||(t[8]=o=>e.date=o),color:"lime-6","text-color":"black",mask:"YYYY-MM-DD"},{default:d(()=>[f("div",_s,[mt(a(H,{label:e.$t("ballotF.basicInfo.date_close"),color:"light-blue-13",flat:""},null,8,["label"]),[[Ct]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["class","modelValue","rules","label"])]),f("div",Cs,[a(ee,{class:M(["q-pa-sm",l.hasError("place")?"q-pb-md":""]),ref:"place",outlined:"",clearable:"",modelValue:e.place,"onUpdate:modelValue":[t[11]||(t[11]=o=>e.place=o),t[12]||(t[12]=o=>l.saveBallot())],type:"text",label:e.$t("ballotF.basicInfo.place"),"lazy-rules":"",rules:[]},{prepend:d(()=>[a(E,{name:"home"})]),_:1},8,["class","modelValue","label"])])]),f("div",Ts,[f("div",Ns,[a(ee,{class:M(["q-pa-sm",l.hasError("adj_name")?"q-pb-md":""]),ref:"adj_name",outlined:"",clearable:"",modelValue:e.adj_name,"onUpdate:modelValue":[t[13]||(t[13]=o=>e.adj_name=o),t[14]||(t[14]=o=>l.saveBallot())],type:"text",label:e.$t("ballotF.basicInfo.name"),"lazy-rules":"",rules:[e.$rules.noNumbers]},{prepend:d(()=>[a(E,{name:"badge"})]),_:1},8,["class","modelValue","label","rules"])]),f("div",As,[a(ee,{class:M(["q-pa-sm",l.hasError("adj_surname")?"q-pb-md":""]),ref:"adj_surname",outlined:"",clearable:"",modelValue:e.adj_surname,"onUpdate:modelValue":[t[15]||(t[15]=o=>e.adj_surname=o),t[16]||(t[16]=o=>l.saveBallot())],type:"text",label:e.$t("ballotF.basicInfo.surname"),"lazy-rules":"",rules:[e.$rules.noNumbers]},{prepend:d(()=>[a(E,{name:"badge"})]),_:1},8,["class","modelValue","label","rules"])])]),f("div",Fs,[f("div",Ps,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("team_AFF")?"q-pb-md":""]),ref:"team_AFF",outlined:"",modelValue:e.team_AFF,"onUpdate:modelValue":[t[17]||(t[17]=o=>e.team_AFF=o),t[18]||(t[18]=o=>l.saveBallot())],label:e.$t("ballotF.basicInfo.teamAFF"),options:l.getTournamentTeams,"option-label":o=>o==null?"":o.name},{prepend:d(()=>[a(E,{name:"group_add"})]),_:1},8,["class","modelValue","label","options","option-label"])]),f("div",Vs,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("team_NEG")?"q-pb-md":""]),ref:"team_NEG",outlined:"",modelValue:e.team_NEG,"onUpdate:modelValue":[t[19]||(t[19]=o=>e.team_NEG=o),t[20]||(t[20]=o=>l.saveBallot())],label:e.$t("ballotF.basicInfo.teamNEG"),options:l.getTournamentTeams,"option-label":o=>o==null?"":o.name},{prepend:d(()=>[a(E,{name:"group_remove"})]),_:1},8,["class","modelValue","label","options","option-label"])])]),a(me,{spaced:"",inset:""}),f("h6",Bs,I(e.$t("ballotF.speakers.title")),1),f("div",Qs,[f("div",Ms,[a(bt,{bordered:"",class:"rounded-borders"},{default:d(()=>[e.loading?L("",!0):(k(),S(p,{key:0,speaker:"A1",team:e.team_AFF,id:s.id,"innit-data":e.A1,"toggle-timer":l.toggleTimer("A1"),"toggle-CQ-timer":l.toggleTimer("A1xN2"),timerData:e.timers!=null?e.timers.A1:null,timerCQData:e.timers!=null?e.timers.A1xN2:null,onTimerTick:l.getTime,onTimerCQTick:l.getTime,onGetValues:t[21]||(t[21]=o=>(l.getSpeakerValues(o),l.saveBallot()))},null,8,["team","id","innit-data","toggle-timer","toggle-CQ-timer","timerData","timerCQData","onTimerTick","onTimerCQTick"])),e.loading?L("",!0):(k(),S(p,{key:1,speaker:"A2",team:e.team_AFF,id:s.id,"innit-data":e.A2,"toggle-timer":l.toggleTimer("A2"),timerData:e.timers!=null?e.timers.A2:null,onTimerTick:l.getTime,onGetValues:t[22]||(t[22]=o=>(l.getSpeakerValues(o),l.saveBallot()))},null,8,["team","id","innit-data","toggle-timer","timerData","onTimerTick"])),e.loading?L("",!0):(k(),S(p,{key:2,speaker:"A3",team:e.team_AFF,id:s.id,"innit-data":e.A3,"toggle-timer":l.toggleTimer("A3"),"toggle-CQ-timer":l.toggleTimer("A3xN1"),timerData:e.timers!=null?e.timers.A3:null,timerCQData:e.timers!=null?e.timers.A3xN1:null,onTimerTick:l.getTime,onTimerCQTick:l.getTime,onGetValues:t[23]||(t[23]=o=>(l.getSpeakerValues(o),l.saveBallot()))},null,8,["team","id","innit-data","toggle-timer","toggle-CQ-timer","timerData","timerCQData","onTimerTick","onTimerCQTick"])),e.loading?L("",!0):(k(),S(p,{key:3,speaker:"N1",team:e.team_NEG,id:s.id,"innit-data":e.N1,"toggle-timer":l.toggleTimer("N1"),"toggle-CQ-timer":l.toggleTimer("N1xA2"),timerData:e.timers!=null?e.timers.N1:null,timerCQData:e.timers!=null?e.timers.N1xA2:null,onTimerTick:l.getTime,onTimerCQTick:l.getTime,onGetValues:t[24]||(t[24]=o=>(l.getSpeakerValues(o),l.saveBallot()))},null,8,["team","id","innit-data","toggle-timer","toggle-CQ-timer","timerData","timerCQData","onTimerTick","onTimerCQTick"])),e.loading?L("",!0):(k(),S(p,{key:4,speaker:"N2",team:e.team_NEG,id:s.id,"innit-data":e.N2,"toggle-timer":l.toggleTimer("N2"),timerData:e.timers!=null?e.timers.N2:null,onTimerTick:l.getTime,onGetValues:t[25]||(t[25]=o=>(l.getSpeakerValues(o),l.saveBallot()))},null,8,["team","id","innit-data","toggle-timer","timerData","onTimerTick"])),e.loading?L("",!0):(k(),S(p,{key:5,speaker:"N3",team:e.team_NEG,id:s.id,"innit-data":e.N3,"toggle-timer":l.toggleTimer("N3"),"toggle-CQ-timer":l.toggleTimer("N3xA1"),timerData:e.timers!=null?e.timers.N3:null,timerCQData:e.timers!=null?e.timers.N3xA1:null,onTimerTick:l.getTime,onTimerCQTick:l.getTime,onGetValues:t[26]||(t[26]=o=>(l.getSpeakerValues(o),l.saveBallot()))},null,8,["team","id","innit-data","toggle-timer","toggle-CQ-timer","timerData","timerCQData","onTimerTick","onTimerCQTick"]))]),_:1})])]),a(me,{spaced:"",inset:""}),f("h6",Ds,I(e.$t("ballotF.decision.title")),1),f("div",js,[f("div",Es,[a(ee,{class:"q-pa-sm q-pb-md",ref:"decision",outlined:"","bottom-slots":"","shadow-text":e.decision.length==0?e.$t("ballotF.decision.decision_hint"):"",modelValue:e.decision,"onUpdate:modelValue":[t[27]||(t[27]=o=>e.decision=o),t[28]||(t[28]=o=>l.saveBallot())],type:"textarea",label:e.$t("ballotF.decision.decision"),debounce:e.text_refresh_rate,"lazy-rules":"",rules:[]},{prepend:d(()=>[a(E,{name:"reviews"})]),hint:d(()=>[e.decision.length<e.decision_char_goal&&e.decision.length>0?(k(),S(E,{key:0,name:"more_horiz",size:"50px",style:{transform:"translateY(-20px)"}})):L("",!0),e.decision.length==0?(k(),S(E,{key:1,name:"close",size:"25px",style:{transform:"translateY(-8px)"},color:"negative"})):L("",!0),e.decision.length>=e.decision_char_goal?(k(),S(E,{key:2,name:"done",size:"25px",style:{transform:"translateY(-8px)"},color:"positive"})):L("",!0)]),counter:d(()=>[f("p",{class:M({"text-negative":e.decision.length<e.decision_char_goal,"text-positive":e.decision.length>=e.decision_char_goal})},I(e.decision.length-e.decision_char_goal),3)]),append:d(()=>[a(H,{icon:"help",flat:"",round:"",dense:""},{default:d(()=>[a(ae,null,{default:d(()=>[U(I(e.$t("ballotF.decision.decision_tooltip")),1)]),_:1})]),_:1})]),_:1},8,["shadow-text","modelValue","label","debounce"])])]),f("div",Is,[f("div",Rs,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("adj_winning_team")?"q-pb-md":""]),ref:"adj_winning_team",outlined:"",modelValue:e.adj_winning_team,"onUpdate:modelValue":[t[29]||(t[29]=o=>e.adj_winning_team=o),t[30]||(t[30]=o=>l.saveBallot())],label:e.$t("ballotF.decision.adjWinner"),options:e.team_AFF==null||e.team_NEG==null?l.getTournamentTeams:[e.team_AFF,e.team_NEG],"option-label":o=>o==null?"":o.name},{prepend:d(()=>[a(E,{name:"sports"})]),_:1},8,["class","modelValue","label","options","option-label"])]),f("div",Os,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("winning_team")?"q-pb-md":""]),ref:"winning_team",outlined:"",modelValue:e.winning_team,"onUpdate:modelValue":[t[31]||(t[31]=o=>e.winning_team=o),t[32]||(t[32]=o=>l.saveBallot())],label:e.$t("ballotF.decision.winner"),options:e.team_AFF==null||e.team_NEG==null?l.getTournamentTeams:[e.team_AFF,e.team_NEG],"option-label":o=>o==null?"":o.name},{prepend:d(()=>[a(E,{name:"military_tech"})]),_:1},8,["class","modelValue","label","options","option-label"])])]),f("div",Ls,[f("div",Hs,[a(oe,{class:M(["q-pa-sm",l.hasError("adjudications")?"q-pb-md":""]),ref:"adjudications",outlined:"",clearable:"",modelValue:e.adjudications,"onUpdate:modelValue":[t[33]||(t[33]=o=>e.adjudications=o),t[34]||(t[34]=o=>l.saveBallot())],type:"text",label:e.$t("ballotF.decision.adjudications"),options:["3:0","2:1"]},{prepend:d(()=>[a(E,{name:"gavel"})]),_:1},8,["class","modelValue","label"])])]),f("div",zs,[f("div",Ws,[a(oe,{style:{"min-width":"250px"},class:M(["q-pa-sm",l.hasError("best_speaker")?"q-pb-md":""]),ref:"best_speaker",outlined:"",modelValue:e.best_speaker,"onUpdate:modelValue":[t[35]||(t[35]=o=>e.best_speaker=o),t[36]||(t[36]=o=>l.saveBallot())],label:e.$t("ballotF.decision.bestSpeaker"),options:l.getSpeakers,"option-label":o=>o==null?"":(o==null?void 0:o.name)+" "+(o==null?void 0:o.surname)},{prepend:d(()=>[a(E,{name:"star"})]),_:1},8,["class","modelValue","label","options","option-label"])])]),f("div",Us,[f("div",Gs,[a(ee,{class:M(["q-pa-sm",l.hasError("NEG_sum")?"q-pb-md":""]),ref:"NEG_sum",outlined:"",readonly:"",modelValue:l.getTeamNPointSum,"onUpdate:modelValue":t[37]||(t[37]=o=>l.getTeamNPointSum=o),type:"number",label:e.$t("ballotF.decision.sumNEG"),"lazy-rules":"",rules:[]},{prepend:d(()=>[a(E,{name:"functions"})]),_:1},8,["class","modelValue","label"])]),f("div",Ys,[a(ee,{class:M(["q-pa-sm",l.hasError("AFF_sum")?"q-pb-md":""]),ref:"AFF_sum",outlined:"",readonly:"",modelValue:l.getTeamAPointSum,"onUpdate:modelValue":t[38]||(t[38]=o=>l.getTeamAPointSum=o),type:"number",label:e.$t("ballotF.decision.sumAFF"),"lazy-rules":"",rules:[]},{prepend:d(()=>[a(E,{name:"functions"})]),_:1},8,["class","modelValue","label"])])])]),_:1},512)]),_:1}),a(me,{spaced:"",inset:""}),a(dt,null,{default:d(()=>[f("div",Ks,[a(H,{class:"q-pa-sm",elevated:"",size:"lg",color:"light-blue-13","text-color":"grey-1",onClick:l.submit,label:e.$t("ballotF.button.save")},null,8,["onClick","label"])]),f("div",Js,[a(H,{class:"q-pa-sm",elevated:"",size:"lg",color:"orange-13","text-color":"grey-1",label:e.$t("ballotF.button.cancel"),onClick:t[39]||(t[39]=o=>l.deleteSavedBallot()),to:{name:"ballot",params:{user:0}}},null,8,["label"])])]),_:1})]),_:1})]),_:1})]),_:1},8,["class","style"])],2)):L("",!0)]),_:1},8,["class"])])):L("",!0)],64)}var fi=Xe(gs,[["render",Xs]]);export{fi as default};
