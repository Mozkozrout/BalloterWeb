import{l as ne,m as Ie,q as Me,r as le,c as S,w as Ee,h as y,E as I,C as Je,ar as Ze,g as Oe,z as Xe,d as X,S as x,I as K,U as ee,J as i,K as u,L as n,f as a,O as g,P as o,Z as A,B as xe,a4 as t,a5 as c,V as w,N as k,W as V,Y,F as D,a6 as F,b1 as Ue,b7 as M,b5 as Q,X as f,a1 as et,b6 as G,i as tt,v as oe,aa as lt,M as R,bs as He,ak as ot,b8 as at,a0 as st}from"./index.0f3dcf3a.js";import{Q as ae,a as L,b as se,c as z}from"./QTabPanels.399a11ea.js";import{T as it,a as nt,b as rt,c as dt,d as ut,Q as ht}from"./QLayout.2b5e7910.js";import{Q as ie,b as We,a as Le}from"./QItem.39e6fcfe.js";import{a as re,Q as b}from"./QSkeleton.953fdc16.js";import{u as te}from"./BallotStore.5b1c0dbb.js";import{Q as C}from"./QChip.ab755d56.js";import{a as mt,Q as ct}from"./QExpansionItem.ff0480a7.js";import{Q as Re}from"./QList.9eb0caa3.js";import{a as pt,Q as Ye}from"./QInfiniteScroll.d520ebd6.js";import{C as wt}from"./ClosePopup.af263d81.js";import{_ as Ge}from"./logo_text.678d9cc1.js";import"./rtl.b51694b1.js";import"./selection.b6202499.js";var ze=ne({name:"QSplitter",props:{...Ie,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:l,emit:s}){const{proxy:{$q:h}}=Oe(),q=Me(e,h),p=le(null),v={before:le(null),after:le(null)},r=S(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(q.value===!0?" q-splitter--dark":"")),$=S(()=>e.horizontal===!0?"height":"width"),d=S(()=>e.reverse!==!0?"before":"after"),m=S(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function B(_){return(e.unit==="%"?_:Math.round(_))+e.unit}const T=S(()=>({[d.value]:{[$.value]:B(e.modelValue)}}));let O,j,U,H,N;function J(_){if(_.isFirst===!0){const E=p.value.getBoundingClientRect()[$.value];O=e.horizontal===!0?"up":"left",j=e.unit==="%"?100:E,U=Math.min(j,m.value[1],Math.max(m.value[0],e.modelValue)),H=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:h.lang.rtl===!0?-1:1)*(e.unit==="%"?E===0?0:100/E:1),p.value.classList.add("q-splitter--active");return}if(_.isFinal===!0){N!==e.modelValue&&s("update:modelValue",N),p.value.classList.remove("q-splitter--active");return}const P=U+H*(_.direction===O?-1:1)*_.distance[e.horizontal===!0?"y":"x"];N=Math.min(j,m.value[1],Math.max(m.value[0],P)),v[d.value].value.style[$.value]=B(N),e.emitImmediately===!0&&e.modelValue!==N&&s("update:modelValue",N)}const Z=S(()=>[[it,J,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function W(_,P){_<P[0]?s("update:modelValue",P[0]):_>P[1]&&s("update:modelValue",P[1])}return Ee(()=>e.modelValue,_=>{W(_,m.value)}),Ee(()=>e.limits,()=>{Xe(()=>{W(e.modelValue,m.value)})}),()=>{const _=[y("div",{ref:v.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:T.value.before},I(l.before)),y("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Je("div",{class:"q-splitter__separator-area absolute-full"},I(l.separator),"sep",e.disable!==!0,()=>Z.value)]),y("div",{ref:v.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:T.value.after},I(l.after))];return y("div",{class:r.value,ref:p},Ze(l.default,_))}}});const bt=X({name:"BallotView",props:["ballot"],data:function(){return{A1:null,A2:null,A3:null,N1:null,N2:null,N3:null,judges:"",best_speaker:null,widthBreakPoint:800}},mounted(){this.loadSpeakers()},methods:{loadSpeakers(){this.ballot.People.forEach(e=>{switch(e.best_speaker===1&&(this.best_speaker=e),e.role){case"A1":this.A1=e;break;case"A2":this.A2=e;break;case"A3":this.A3=e;break;case"N1":this.N1=e;break;case"N2":this.N2=e;break;case"N3":this.N3=e;break;case"Adjudicator":this.judges===""?this.judges+=e.person_id.name+" "+e.person_id.surname:this.judges+=", "+e.person_id.name+" "+e.person_id.surname;break}})},async downloadPDF(){await this.ballotStore.downloadBallotPDF(this.ballot)?this.$q.notify({icon:"done",color:"positive",message:"Sta\u017Eeno"}):this.$q.notify({icon:"warning",color:"negative",message:"Ballot se nepoda\u0159ilo st\xE1hnout"})},speakerPointsSum(e){var l=Number(e.cont_points),s=Number(e.str_points),h=Number(e.style_points),q=Number(e.cq_points);return l+s+h+q},teamPointsSum(e){var l=0;return e==="AFF"?this.A1!=null&&this.A2!=null&&this.A3!=null&&(l=this.speakerPointsSum(this.A1)+this.speakerPointsSum(this.A2)+this.speakerPointsSum(this.A3)):this.N1!=null&&this.N2!=null&&this.N3!=null&&(l=this.speakerPointsSum(this.N1)+this.speakerPointsSum(this.N2)+this.speakerPointsSum(this.N3)),l}},computed:{...x(ee,te)}}),gt={class:"col-grow"},ft={class:"row items-center"},vt={key:0,width:"135",height:"63",src:Ge,align:"right",hspace:"12"},_t={class:"col-grow"},yt={key:0,width:"135",height:"63",src:Ge,align:"right",hspace:"12"},qt={class:"row"},$t={class:"row"},kt={class:"row"},Bt={class:"row"},St={class:"row"},At={class:"row"},Nt=t("br",{clear:"all"},null,-1),Pt={class:"row justify-center"},Ct={border:"1",cellspacing:"0",cellpadding:"0"},Dt=t("tr",null,[t("td",{width:"79",rowspan:"2",valign:"top"},[t("p",{class:"q-px-xs"},"Jm\xE9no / Name:")]),t("td",{width:"261",rowspan:"2",valign:"top"},[t("p",{class:"q-px-xs"}," Pozn\xE1mky k jednotlivci / Individual comments: ")]),t("td",{width:"284",colspan:"5",valign:"top"},[t("p",{align:"center"},"\u0158e\u010Dnick\xE9 body / Speaker points:")])],-1),Vt=t("tr",null,[t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Obs. / Cont."),t("p",{align:"center"},"20-40")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Str. / Str."),t("p",{align:"center"},"15-30")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Styl / Style"),t("p",{align:"center"},"15-30")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"K. v. / C. q."),t("p",{align:"center"},"-5-5")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Sou\u010D. / Sum"),t("p",{align:"center"},"50-100")])],-1),Tt={width:"79",valign:"top"},Qt={class:"q-px-xs"},jt={width:"261",rowspan:"2",valign:"top"},Et={class:"q-px-xs"},Lt={width:"57",rowspan:"2"},zt={align:"center"},Ft={width:"57",rowspan:"2"},It={align:"center"},Mt={width:"57",rowspan:"2"},Ot={align:"center"},Ut={width:"57",rowspan:"2"},Ht={align:"center"},Wt={width:"57",rowspan:"2"},Rt={key:0,align:"center"},Yt={key:1},Gt=t("tr",null,[t("td",{width:"79",valign:"top"},[t("p",{class:"q-px-xs"},"A1")])],-1),Kt={width:"79",valign:"top"},Jt={class:"q-px-xs"},Zt={width:"261",rowspan:"2",valign:"top"},Xt={class:"q-px-xs"},xt={width:"57",rowspan:"2"},el={align:"center"},tl={width:"57",rowspan:"2"},ll={align:"center"},ol={width:"57",rowspan:"2"},al={align:"center"},sl={width:"57",rowspan:"2"},il={align:"center"},nl={width:"57",rowspan:"2"},rl={key:0,align:"center"},dl={key:1},ul=t("tr",null,[t("td",{width:"79",valign:"top"},[t("p",{class:"q-px-xs"},"A2")])],-1),hl={width:"79",valign:"top"},ml={class:"q-px-xs"},cl={width:"261",rowspan:"2",valign:"top"},pl={class:"q-px-xs"},wl={width:"57",rowspan:"2"},bl={align:"center"},gl={width:"57",rowspan:"2"},fl={align:"center"},vl={width:"57",rowspan:"2"},_l={align:"center"},yl={width:"57",rowspan:"2"},ql={align:"center"},$l={width:"57",rowspan:"2"},kl={key:0,align:"center"},Bl={key:1},Sl=t("tr",null,[t("td",{width:"79",valign:"top"},[t("p",{class:"q-px-xs"},"A3")])],-1),Al=t("br",null,null,-1),Nl={class:"row justify-center"},Pl={border:"1",cellspacing:"0",cellpadding:"0"},Cl=t("tr",null,[t("td",{width:"79",rowspan:"2",valign:"top"},[t("p",{class:"q-px-xs"},"Jm\xE9no / Name:")]),t("td",{width:"261",rowspan:"2",valign:"top"},[t("p",{class:"q-px-xs"}," Pozn\xE1mky k jednotlivci / Individual comments: ")]),t("td",{width:"284",colspan:"5",valign:"top"},[t("p",{align:"center"},"\u0158e\u010Dnick\xE9 body / Speaker points:")])],-1),Dl=t("tr",null,[t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Obs. / Cont."),t("p",{align:"center"},"20-40")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Str. / Str."),t("p",{align:"center"},"15-30")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Styl / Style"),t("p",{align:"center"},"15-30")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"K. v. / C. q."),t("p",{align:"center"},"-5-5")]),t("td",{width:"57",valign:"top"},[t("p",{align:"center"},"Sou\u010D. / Sum"),t("p",{align:"center"},"50-100")])],-1),Vl={width:"79",valign:"top"},Tl={class:"q-px-xs"},Ql={width:"261",rowspan:"2",valign:"top"},jl={class:"q-px-xs"},El={width:"57",rowspan:"2"},Ll={align:"center"},zl={width:"57",rowspan:"2"},Fl={align:"center"},Il={width:"57",rowspan:"2"},Ml={align:"center"},Ol={width:"57",rowspan:"2"},Ul={align:"center"},Hl={width:"57",rowspan:"2"},Wl={key:0,align:"center"},Rl={key:1},Yl=t("tr",null,[t("td",{width:"79",valign:"top"},[t("p",{class:"q-px-xs"},"N1")])],-1),Gl={width:"79",valign:"top"},Kl={class:"q-px-xs"},Jl={width:"261",rowspan:"2",valign:"top"},Zl={class:"q-px-xs"},Xl={width:"57",rowspan:"2"},xl={align:"center"},eo={width:"57",rowspan:"2"},to={align:"center"},lo={width:"57",rowspan:"2"},oo={align:"center"},ao={width:"57",rowspan:"2"},so={align:"center"},io={width:"57",rowspan:"2"},no={key:0,align:"center"},ro={key:1},uo=t("tr",null,[t("td",{width:"79",valign:"top"},[t("p",{class:"q-px-xs"},"N2")])],-1),ho={width:"79",valign:"top"},mo={class:"q-px-xs"},co={width:"261",rowspan:"2",valign:"top"},po={class:"q-px-xs"},wo={width:"57",rowspan:"2"},bo={align:"center"},go={width:"57",rowspan:"2"},fo={align:"center"},vo={width:"57",rowspan:"2"},_o={align:"center"},yo={width:"57",rowspan:"2"},qo={align:"center"},$o={width:"57",rowspan:"2"},ko={key:0,align:"center"},Bo={key:1},So=t("tr",null,[t("td",{width:"79",valign:"top"},[t("p",{class:"q-px-xs"},"N3")])],-1),Ao=t("br",null,null,-1),No={class:"row justify-center"},Po=t("table",{border:"1",cellspacing:"0",cellpadding:"0"},[t("tbody",null,[t("tr",null,[t("td",{width:"626",valign:"top"},[t("div",null,[t("p",{align:"center",lass:"q-px-xs"}," Konkr\xE9tn\xED a podrobn\xE9 vysv\u011Btlen\xED rozhodnut\xED / Concrete and detailed justification of the decision: ")])])])])],-1),Co={border:"1",cellspacing:"0",cellpadding:"0"},Do={width:"626",valign:"top"},Vo={class:"q-px-xs"},To=t("br",null,null,-1),Qo={class:"row"},jo={class:"row"},Eo={class:"row"},Lo={class:"row"},zo={class:"row"};function Fo(e,l,s,h,q,p){return i(),u(ht,{view:"Lhh lpR fff",container:"","items-center":"",class:"bg-white text-dark",style:V(e.$q.screen.width>e.widthBreakPoint?"min-width: 800px":"")},{default:n(()=>[a(dt,{reveal:"",class:"bg-dark text-center"},{default:n(()=>[a(nt,null,{default:n(()=>[a(rt,null,{default:n(()=>[g(o(e.ballot.Ballot.motion.name+" - "+e.ballot.Ballot.tournament.name+" - "+new Date(e.ballot.Ballot.date).toLocaleDateString()),1)]),_:1}),a(A,{flat:"",onClick:l[0]||(l[0]=v=>e.downloadPDF()),round:"",dense:"",icon:"download",loading:e.ballotStore.isLoading},null,8,["loading"]),xe(a(A,{flat:"",round:"",dense:"",icon:"close"},null,512),[[wt]])]),_:1})]),_:1}),a(ut,null,{default:n(()=>[a(re,{padding:""},{default:n(()=>{var v,r,$,d,m,B,T,O,j,U,H,N,J,Z,W,_,P,E,de,ue,he,me,ce,pe,we,be,ge,fe,ve,_e,ye,qe,$e,ke,Be,Se,Ae,Ne,Pe,Ce,De,Ve,Te,Qe,je;return[t("div",gt,[t("div",{class:c(e.$q.screen.width<e.widthBreakPoint?"col":"col q-px-xl")},[t("div",ft,[e.$q.screen.width<e.widthBreakPoint?(i(),w("img",vt)):k("",!0),t("div",_t,[t("h6",{class:c(e.$q.screen.width<e.widthBreakPoint?"text-h7":"text-h7 q-ma-md")}," LIST ROZHOD\u010C\xCDHO / THE BALLOT ",2)]),t("div",{class:c(e.$q.screen.width<e.widthBreakPoint?"col":"col q-px-md")},[e.$q.screen.width>e.widthBreakPoint?(i(),w("img",yt)):k("",!0)],2)]),t("div",qt,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Turnaj / Tournament: "+o(e.ballot.Ballot.tournament.name),3)]),t("div",$t,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," M\xEDsto, datum / Place, date: "+o(e.ballot.Ballot.tournament.institution.name+", "+new Date(e.ballot.Ballot.date).toLocaleDateString())+". ",3)]),t("div",kt,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Rozhod\u010D\xED / Adjudicator: "+o(e.judges),3)]),t("div",Bt,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Teze / Motion: "+o(e.ballot.Ballot.motion.name),3)]),t("div",St,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," T\xFDm af. / Team aff.: "+o(e.ballot.Ballot.team_AFF.name),3)]),t("div",At,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," T\xFDm neg. / Team neg.: "+o(e.ballot.Ballot.team_NEG.name),3)])],2),Nt,t("div",Pt,[t("table",Ct,[t("tbody",null,[Dt,Vt,t("tr",null,[t("td",Tt,[t("p",Qt,o(((v=e.A1)==null?void 0:v.person_id.name)+" "+((r=e.A1)==null?void 0:r.person_id.surname)),1)]),t("td",jt,[t("p",Et,o(($=e.A1)==null?void 0:$.comment),1)]),t("td",Lt,[t("p",zt,o((d=e.A1)==null?void 0:d.cont_points),1)]),t("td",Ft,[t("p",It,o((m=e.A1)==null?void 0:m.str_points),1)]),t("td",Mt,[t("p",Ot,o((B=e.A1)==null?void 0:B.style_points),1)]),t("td",Ut,[t("p",Ht,o(e.A1!=null&&e.A1.cq_points>0?"+"+e.A1.cq_points:(T=e.A1)==null?void 0:T.cq_points),1)]),t("td",Wt,[e.A1!=null?(i(),w("p",Rt,o(e.speakerPointsSum(e.A1)),1)):(i(),w("p",Yt,"N/A"))])]),Gt,t("tr",null,[t("td",Kt,[t("p",Jt,o(((O=e.A2)==null?void 0:O.person_id.name)+" "+((j=e.A2)==null?void 0:j.person_id.surname)),1)]),t("td",Zt,[t("p",Xt,o((U=e.A2)==null?void 0:U.comment),1)]),t("td",xt,[t("p",el,o((H=e.A2)==null?void 0:H.cont_points),1)]),t("td",tl,[t("p",ll,o((N=e.A2)==null?void 0:N.str_points),1)]),t("td",ol,[t("p",al,o((J=e.A2)==null?void 0:J.style_points),1)]),t("td",sl,[t("p",il,o(e.A2!=null&&e.A2.cq_points>0?"+"+e.A2.cq_points:(Z=e.A2)==null?void 0:Z.cq_points),1)]),t("td",nl,[e.A2!=null?(i(),w("p",rl,o(e.speakerPointsSum(e.A2)),1)):(i(),w("p",dl,"N/A"))])]),ul,t("tr",null,[t("td",hl,[t("p",ml,o(((W=e.A3)==null?void 0:W.person_id.name)+" "+((_=e.A3)==null?void 0:_.person_id.surname)),1)]),t("td",cl,[t("p",pl,o((P=e.A3)==null?void 0:P.comment),1)]),t("td",wl,[t("p",bl,o((E=e.A3)==null?void 0:E.cont_points),1)]),t("td",gl,[t("p",fl,o((de=e.A3)==null?void 0:de.str_points),1)]),t("td",vl,[t("p",_l,o((ue=e.A3)==null?void 0:ue.style_points),1)]),t("td",yl,[t("p",ql,o(e.A3!=null&&e.A3.cq_points>0?"+"+e.A3.cq_points:(he=e.A3)==null?void 0:he.cq_points),1)]),t("td",$l,[e.A3!=null?(i(),w("p",kl,o(e.speakerPointsSum(e.A3)),1)):(i(),w("p",Bl,"N/A"))])]),Sl])])]),Al,t("div",Nl,[t("table",Pl,[t("tbody",null,[Cl,Dl,t("tr",null,[t("td",Vl,[t("p",Tl,o(((me=e.N1)==null?void 0:me.person_id.name)+" "+((ce=e.N1)==null?void 0:ce.person_id.surname)),1)]),t("td",Ql,[t("p",jl,o((pe=e.N1)==null?void 0:pe.comment),1)]),t("td",El,[t("p",Ll,o((we=e.N1)==null?void 0:we.cont_points),1)]),t("td",zl,[t("p",Fl,o((be=e.N1)==null?void 0:be.str_points),1)]),t("td",Il,[t("p",Ml,o((ge=e.N1)==null?void 0:ge.style_points),1)]),t("td",Ol,[t("p",Ul,o(e.N1!=null&&e.N1.cq_points>0?"+"+e.N1.cq_points:(fe=e.N1)==null?void 0:fe.cq_points),1)]),t("td",Hl,[e.N1!=null?(i(),w("p",Wl,o(e.speakerPointsSum(e.N1)),1)):(i(),w("p",Rl,"N/A"))])]),Yl,t("tr",null,[t("td",Gl,[t("p",Kl,o(((ve=e.N2)==null?void 0:ve.person_id.name)+" "+((_e=e.N2)==null?void 0:_e.person_id.surname)),1)]),t("td",Jl,[t("p",Zl,o((ye=e.N2)==null?void 0:ye.comment),1)]),t("td",Xl,[t("p",xl,o((qe=e.N2)==null?void 0:qe.cont_points),1)]),t("td",eo,[t("p",to,o(($e=e.N2)==null?void 0:$e.str_points),1)]),t("td",lo,[t("p",oo,o((ke=e.N2)==null?void 0:ke.style_points),1)]),t("td",ao,[t("p",so,o(e.N2!=null&&e.N2.cq_points>0?"+"+e.N2.cq_points:(Be=e.N2)==null?void 0:Be.cq_points),1)]),t("td",io,[e.N2!=null?(i(),w("p",no,o(e.speakerPointsSum(e.N2)),1)):(i(),w("p",ro,"N/A"))])]),uo,t("tr",null,[t("td",ho,[t("p",mo,o(((Se=e.N3)==null?void 0:Se.person_id.name)+" "+((Ae=e.N3)==null?void 0:Ae.person_id.surname)),1)]),t("td",co,[t("p",po,o((Ne=e.N3)==null?void 0:Ne.comment),1)]),t("td",wo,[t("p",bo,o((Pe=e.N3)==null?void 0:Pe.cont_points),1)]),t("td",go,[t("p",fo,o((Ce=e.N3)==null?void 0:Ce.str_points),1)]),t("td",vo,[t("p",_o,o((De=e.N3)==null?void 0:De.style_points),1)]),t("td",yo,[t("p",qo,o(e.N3!=null&&e.N3.cq_points>0?"+"+e.N3.cq_points:(Ve=e.N3)==null?void 0:Ve.cq_points),1)]),t("td",$o,[e.N3!=null?(i(),w("p",ko,o(e.speakerPointsSum(e.N3)),1)):(i(),w("p",Bo,"N/A"))])]),So])])]),Ao,t("div",No,[Po,t("table",Co,[t("tbody",null,[t("tr",null,[t("td",Do,[t("p",Vo,o(e.ballot.Ballot.decision),1)])])])])]),To,t("div",{class:c(e.$q.screen.width<e.widthBreakPoint?"col":"col q-px-xl")},[t("div",Qo,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Rozhod\u010D\xEDho v\xEDt\u011Bzn\xFD t\xFDm / Adjudicator\u2019s winning team: "+o(e.ballot.Ballot.adj_winning_team.name),3)]),t("div",jo,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," V\xEDt\u011Bzn\xFD t\xFDm / Winning team: "+o(e.ballot.Ballot.winning_team.name),3)]),t("div",Eo,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Rozhodnut\xEDm / Adjudications: "+o(e.ballot.Ballot.adjucations),3)]),t("div",Lo,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Nejlep\u0161\xED \u0159e\u010Dn\xEDk / Best speaker: "+o(((Te=e.best_speaker)==null?void 0:Te.role)+" - "+((Qe=e.best_speaker)==null?void 0:Qe.person_id.name)+" "+((je=e.best_speaker)==null?void 0:je.person_id.surname)),3)]),t("div",zo,[t("p",{class:c(e.$q.screen.width<e.widthBreakPoint?"":"q-px-md")}," Sou\u010Det \u0159e\u010Dnick\xFDch bod\u016F / Sum of speaker points: A: "+o(e.teamPointsSum("AFF"))+" N: "+o(e.teamPointsSum("NEG")),3)])],2)])]}),_:1})]),_:1})]),_:1},8,["style"])}var Ke=K(bt,[["render",Fo]]);const Io=X({name:"BallotList",props:["ballotList"],components:{BallotView:Ke},data:function(){return{viewSwitch:!1,viewBallot:null,widthBreakPoint:1150}},methods:{onViewClick(e){this.viewSwitch=!0,this.viewBallot=e},onEditClick(e){var l;this.authStore.user!=null&&this.authStore.user.person!=null&&this.authStore.user.person.id!=((l=this.author(e))==null?void 0:l.id)?this.$dialogs.unauthorized():this.ballotStore.ballot!=null?this.$q.dialog({title:this.$t("ballot.add.warning.autosave.title"),message:this.$t("ballot.add.warning.autosave.message"),persistent:!0,ok:{flat:!0,color:"orange-13",label:this.$t("ballot.add.warning.autosave.button.ok")},cancel:{flat:!0,color:"light-blue-13",label:this.$t("ballot.add.warning.autosave.button.cancel")}}).onOk(()=>{localStorage.removeItem("ballot"),this.ballotStore.savedBallot=null,this.$router.push({path:"/ballot/edit/"+e.Ballot.id})}).onCancel(()=>{this.$router.push({path:"/ballot/edit/"+this.ballotStore.ballot.Ballot.id})}):this.$router.push({path:"/ballot/edit/"+e.Ballot.id})},onDeleteClick(e){this.$q.dialog({title:this.$t("ballot.list.delete.title"),message:this.$t("ballot.list.delete.message"),persistent:!0,ok:{flat:!0,color:"negative",label:this.$t("ballot.list.delete.button.ok")},cancel:{flat:!0,color:"light-blue-13",label:this.$t("ballot.list.delete.button.cancel")}}).onOk(async()=>{var l;this.authStore.user!=null&&this.authStore.user.person!=null&&this.authStore.user.person.id!=((l=this.author(e))==null?void 0:l.id)?this.$dialogs.unauthorized():await this.ballotStore.deleteBallot(e)?this.$q.notify({icon:"done",color:"positive",message:this.$t("ballot.list.delete.success")}):this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballot.list.delete.failure")})})},headerStyle(e){var h;var l="text-subtitle2",s=this.author(e);return(s==null?void 0:s.id)==((h=this.authStore.user)==null?void 0:h.person.id),l},iconStyle(e){var h;var l="description",s=this.author(e);return(s==null?void 0:s.id)==((h=this.authStore.user)==null?void 0:h.person.id)&&(l="edit_document"),l},author(e){var l=null;return e.People.forEach(s=>{s.author==1&&(l=s.person_id)}),l},teamMembers(e,l){var s="";return l?e.Ballot.team_AFF.team_members.forEach(h=>{s===""?s+=h.name+" "+h.surname:s+=", "+h.name+" "+h.surname}):e.Ballot.team_NEG.team_members.forEach(h=>{s===""?s+=h.name+" "+h.surname:s+=", "+h.name+" "+h.surname}),s},judges(e){var l="";return e.People.forEach(s=>{s.role==="Adjudicator"&&(l===""?l+=s.person_id.name+" "+s.person_id.surname:l+=", "+s.person_id.name+" "+s.person_id.surname)}),l}},computed:{...x(ee,te),mobileH(){return this.$q.platform.is.mobile?(this.$q.screen.height-50)/1.5:this.$q.screen.height/2.2}}}),Mo={class:"col-grow"},Oo={class:"row"},Uo={class:"row"},Ho={class:"row"},Wo={class:"row"},Ro={class:"row"},Yo={class:"row"},Go=t("br",null,null,-1),Ko={class:"row"},Jo={class:"row justify-center q-my-md"};function Zo(e,l,s,h,q,p){const v=Y("BallotView");return i(),w(D,null,[a(Ye,{offset:250,style:V([{"max-width":"1000px",overflow:"auto"},{height:e.mobileH+"px"}]),class:c({"q-pa-md":!e.$q.platform.is.mobile})},{loading:n(()=>[t("div",Jo,[e.ballotStore.isLoading?(i(),u(pt,{key:0,color:"lime-6",size:"40px"})):(i(),u(mt,{key:1}))])]),default:n(()=>[a(Re,{separator:"",bordered:"",class:"rounded-borders"},{default:n(()=>[e.ballotList.length==0?(i(),u(We,{key:0},{default:n(()=>[a(ie,{class:"text-subtitle1"},{default:n(()=>[g(o(e.$t("ballot.list.empty")),1)]),_:1})]),_:1})):k("",!0),(i(!0),w(D,null,F(e.ballotList,(r,$)=>(i(),u(ct,{icon:e.iconStyle(r),"header-class":e.headerStyle(r),key:$,label:r.Ballot.motion.name,caption:r.Ballot.tournament.name+" - "+new Date(r.Ballot.date).toLocaleDateString()},{default:n(()=>[a(M,null,{default:n(()=>[a(Q,null,{default:n(()=>[t("div",Mo,[t("div",Oo,[a(C,{class:c({"bg-lime-2":!e.$q.dark.isActive,"bg-light-blue-10":e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"military_tech",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"military_tech",color:"lime-6"})),g(" "+o(e.$t("ballot.list.winner"))+" "+o(e.$q.screen.width>e.widthBreakPoint?r.Ballot.winning_team.id==r.Ballot.team_AFF.id?"Afirmace - "+r.Ballot.winning_team.name:"Negace - "+r.Ballot.winning_team.name:r.Ballot.winning_team.id==r.Ballot.team_AFF.id?"Afirmace":"Negace"),1)]),_:2},1032,["class"])]),t("div",Uo,[a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"history_edu",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"history_edu",color:"lime-6"})),g(" "+o(e.$t("ballot.list.motion"))+" "+o(r.Ballot.motion.name),1)]),_:2},1032,["class"])]),t("div",Ho,[a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"emoji_events",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"emoji_events",color:"lime-6"})),g(" "+o(e.$t("ballot.list.tournament"))+" "+o(r.Ballot.tournament.name)+" "+o(e.$q.screen.width>e.widthBreakPoint?" - (Od: "+new Date(r.Ballot.tournament.beginning).toLocaleDateString()+" Do: "+new Date(r.Ballot.tournament.end).toLocaleDateString()+")":""),1)]),_:2},1032,["class"])]),t("div",Wo,[a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"group_add",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"group_add",color:"lime-6"})),g(" "+o(e.$t("ballot.list.teamAFF"))+" "+o(r.Ballot.team_AFF.name)+" "+o(e.$q.screen.width>e.widthBreakPoint?" - ("+e.teamMembers(r,!0)+")":""),1)]),_:2},1032,["class"])]),t("div",Ro,[a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"group_remove",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"group_remove",color:"lime-6"})),g(" "+o(e.$t("ballot.list.teamNEG"))+" "+o(r.Ballot.team_NEG.name)+" "+o(e.$q.screen.width>e.widthBreakPoint?" - ("+e.teamMembers(r,!1)+")":""),1)]),_:2},1032,["class"])]),t("div",Yo,[a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"gavel",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"gavel",color:"lime-6"})),g(" "+o(e.$t("ballot.list.judge"))+" "+o(e.judges(r)),1)]),_:2},1032,["class"])]),Go,t("div",Ko,[a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>{var d,m;return[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"person",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"person",color:"lime-6"})),g(" "+o(e.$t("ballot.list.author"))+" "+o((d=e.author(r))==null?void 0:d.name)+" "+o((m=e.author(r))==null?void 0:m.surname),1)]}),_:2},1032,["class"]),a(C,{class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"calendar_month",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"calendar_month",color:"lime-6"})),g(" "+o(e.$t("ballot.list.createdAt"))+" "+o(new Date(r.Ballot.created_at).toLocaleDateString()),1)]),_:2},1032,["class"]),r.Ballot.updated_at!=null&&r.Ballot.updated_at!==r.Ballot.created_at?(i(),u(C,{key:0,class:c({"bg-white":!e.$q.dark.isActive})},{default:n(()=>[e.$q.dark.isActive?(i(),u(f,{key:0,icon:"edit_calendar",color:"light-blue-13"})):(i(),u(f,{key:1,icon:"edit_calendar",color:"lime-6"})),g(" "+o(e.$t("ballot.list.editedAt"))+" "+o(new Date(r.Ballot.motion.updated_at).toDateString()),1)]),_:2},1032,["class"])):k("",!0)])])]),_:2},1024),a(et,{inset:""}),a(G,null,{default:n(()=>{var d,m;return[a(A,{flat:"",class:"q-pa-sm",color:"light-blue-13",label:e.$t("ballot.list.button.view"),onClick:B=>e.onViewClick(r)},null,8,["label","onClick"]),e.authStore.user!=null&&e.authStore.user.person.id==((d=e.author(r))==null?void 0:d.id)?(i(),u(A,{key:0,flat:"",class:"q-pa-sm",color:"orange-13",label:e.$t("ballot.list.button.edit"),onClick:B=>e.onEditClick(r)},null,8,["label","onClick"])):k("",!0),e.authStore.user!=null&&e.authStore.user.person.id==((m=e.author(r))==null?void 0:m.id)?(i(),u(A,{key:1,flat:"",class:"q-pa-sm",color:"negative",label:e.$t("ballot.list.button.delete"),onClick:B=>e.onDeleteClick(r)},null,8,["label","onClick"])):k("",!0)]}),_:2},1024)]),_:2},1024)]),_:2},1032,["icon","header-class","label","caption"]))),128))]),_:1})]),_:1},8,["style","class"]),a(Ue,{modelValue:e.viewSwitch,"onUpdate:modelValue":l[0]||(l[0]=r=>e.viewSwitch=r)},{default:n(()=>[a(v,{ballot:e.viewBallot},null,8,["ballot"])]),_:1},8,["modelValue"])],64)}var Xo=K(Io,[["render",Zo]]),Fe=ne({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:l}){const s=tt(He,oe);if(s===oe)return console.error("QTimelineEntry needs to be child of QTimeline"),oe;const h=S(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),q=S(()=>`q-timeline__dot text-${e.color||s.color}`),p=S(()=>s.layout==="comfortable"&&s.side==="left");return()=>{const v=lt(l.default,[]);if(e.body!==void 0&&v.unshift(e.body),e.heading===!0){const d=[y("div"),y("div"),y(e.tag,{class:"q-timeline__heading-title"},v)];return y("div",{class:"q-timeline__heading"},p.value===!0?d.reverse():d)}let r;e.icon!==void 0?r=[y(R,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(r=[y("img",{class:"q-timeline__dot-img",src:e.avatar})]);const $=[y("div",{class:"q-timeline__subtitle"},[y("span",{},I(l.subtitle,[e.subtitle]))]),y("div",{class:q.value},r),y("div",{class:"q-timeline__content"},[y("h6",{class:"q-timeline__title"},I(l.title,[e.title]))].concat(v))];return y("li",{class:h.value},p.value===!0?$.reverse():$)}}}),xo=ne({name:"QTimeline",props:{...Ie,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:l}){const s=Oe(),h=Me(e,s.proxy.$q);ot(He,e);const q=S(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(h.value===!0?" q-timeline--dark":""));return()=>y("ul",{class:q.value},I(l.default))}});const ea=X({name:"BallotTimeLine",components:{BallotView:Ke},data:function(){return{viewSwitch:!1,viewBallot:null}},methods:{onViewClick(e){this.viewSwitch=!0,this.viewBallot=e},author(e){var l=null;return e.People.forEach(s=>{s.author==1&&(l=s.person_id)}),l},judges(e){var l="";return e.People.forEach(s=>{s.role==="Adjudicator"&&(l===""?l+=s.person_id.name+" "+s.person_id.surname:l+=", "+s.person_id.name+" "+s.person_id.surname)}),l}},computed:{...x(ee,te),sortedBallots(){var e=this.ballotStore.ballots;return e.sort(function(l,s){const h=new Date(l.Ballot.date).getTime();return new Date(s.Ballot.date).getTime()-h}),e}}}),ta={key:0},la=t("br",null,null,-1),oa=t("br",null,null,-1),aa={key:1},sa=t("br",null,null,-1),ia=t("br",null,null,-1);function na(e,l,s,h,q,p){const v=Y("BallotView");return i(),w(D,null,[a(xo,{color:"light-blue-13",style:V([{"max-width":"1000px",overflow:"auto"},{height:e.$q.screen.height/2.1+"px"}]),class:"q-pa-md"},{default:n(()=>[a(Fe,{heading:""},{default:n(()=>[g(o(e.$t("ballot.timeline.title")),1)]),_:1}),(i(!0),w(D,null,F(e.sortedBallots,(r,$)=>{var d,m;return i(),u(Fe,{onClick:B=>e.onViewClick(r),style:{cursor:"pointer"},key:$,title:r.Ballot.tournament.name+" - "+r.Ballot.motion.name,subtitle:new Date(r.Ballot.date).toLocaleDateString(e.$i18n.locale,{dateStyle:"full"}),icon:((d=e.author(r))==null?void 0:d.id)===((m=e.authStore.user)==null?void 0:m.person.id)?"edit_document":"description"},{default:n(()=>{var B,T;return[((B=e.author(r))==null?void 0:B.id)===((T=e.authStore.user)==null?void 0:T.person.id)?(i(),w("div",ta,[g(o(e.$t("ballot.timeline.tournament"))+" "+o(r.Ballot.tournament.name)+" "+o(e.$t("ballot.timeline.authorMotion"))+" "+o('"'+r.Ballot.motion.name+'"'),1),la,g(" "+o(e.$t("ballot.timeline.winner"))+" "+o(r.Ballot.winning_team.name)+".",1),oa,g(" "+o(e.$t("ballot.timeline.judge"))+" "+o(e.judges(r)),1)])):(i(),w("div",aa,[g(o(e.$t("ballot.timeline.tournament"))+" "+o(r.Ballot.tournament.name)+" "+o(e.$t("ballot.timeline.participantMotion"))+" "+o('"'+r.Ballot.motion.name+'"'),1),sa,g(" "+o(e.$t("ballot.timeline.winner"))+" "+o(r.Ballot.winning_team.name)+".",1),ia,g(" "+o(e.$t("ballot.timeline.judge"))+" "+o(e.judges(r)),1)]))]}),_:2},1032,["onClick","title","subtitle","icon"])}),128))]),_:1},8,["style"]),a(Ue,{modelValue:e.viewSwitch,"onUpdate:modelValue":l[0]||(l[0]=r=>e.viewSwitch=r)},{default:n(()=>[a(v,{ballot:e.viewBallot},null,8,["ballot"])]),_:1},8,["modelValue"])],64)}var ra=K(ea,[["render",na]]);const da=X({name:"BallotPageSkeleton",computed:{mobileW(){return this.$q.platform.is.mobile?this.$q.screen.width:this.$q.screen.width/1.9},mobileH(){return this.$q.platform.is.mobile?this.$q.screen.height-50:350}}}),ua={id:"Ballot Page Skeleton"},ha={class:"row"},ma={class:"row justify-center"},ca={class:"col"},pa={class:"row justify-center"},wa={class:"row justify-center"};function ba(e,l,s,h,q,p){return i(),w("div",ua,[a(re,{class:"row justify-center items-center",style:{background:"linear-gradient(#f3f3f5, #b4b4b4)"}},{default:n(()=>[t("div",{class:c({"q-pa-lg":!e.$q.platform.is.mobile})},[t("div",ha,[a(M,{square:"",style:V({minWidth:e.mobileW+"px",minHeight:e.mobileH+"px"})},{default:n(()=>[a(Q,null,{default:n(()=>[t("div",{class:c({"row justify-center":e.$q.screen.width>=1150,"row justify-start":e.$q.screen.width<=1150})},[a(b,{type:"rect",width:"100px",height:"50px"}),a(b,{type:"rect",width:"200px",height:"50px",class:"q-ml-md absolute",style:{bottom:"0",right:"18px",transform:"translateY(-15px)"}})],2)]),_:1}),t("div",ma,[a(b,{type:"text",width:"100px",class:"q-ma-sm q-py-sm"}),a(b,{type:"text",width:"100px",class:"q-ma-sm q-py-sm"}),a(b,{type:"text",width:"100px",class:"q-ma-sm q-py-sm"}),e.$q.platform.is.mobile?k("",!0):(i(),u(b,{key:0,type:"text",width:"100px",class:"q-ma-sm q-py-sm"}))]),a(Q,null,{default:n(()=>[a(Ye,{offset:250,style:V([{"max-width":"1000px",overflow:"auto"},{height:e.$q.screen.height/2.2+"px"}]),class:"q-pa-md"},{default:n(()=>[a(Re,{separator:"",bordered:"",class:"rounded-borders"},{default:n(()=>[a(b,{type:"QInput",class:"q-ma-sm"}),a(b,{type:"QInput",class:"q-ma-sm"}),a(b,{type:"QInput",class:"q-ma-sm"}),a(b,{type:"QInput",class:"q-ma-sm"}),a(b,{type:"QInput",class:"q-ma-sm"})]),_:1})]),_:1},8,["style"])]),_:1}),a(G,{class:"row justify-center"},{default:n(()=>[e.$q.platform.is.mobile?(i(),u(b,{key:1,type:"QToggle",class:"q-ma-md absolute",style:{bottom:"0",left:"18px",transform:"translateY(-5px)"}})):(i(),u(b,{key:0,type:"QToggle",width:"200px",class:"q-ma-md absolute",style:{bottom:"0",left:"18px",transform:"translateY(-5px)"}})),e.$q.platform.is.mobile?(i(),u(M,{key:3,flat:"",bordered:"",class:"q-pa-xs absolute",style:{bottom:"20px"}},{default:n(()=>[a(Q,{horizontal:""},{default:n(()=>[a(b,{type:"rect",width:"30px",height:"30px",class:"q-ma-sm"}),a(b,{type:"rect",width:"40px",height:"40px",class:"q-ma-sm"}),a(b,{type:"rect",width:"30px",height:"30px",class:"q-ma-sm"})]),_:1})]),_:1})):(i(),u(M,{key:2,flat:"",bordered:"",class:"q-pa-xs"},{default:n(()=>[a(Q,{horizontal:""},{default:n(()=>[a(b,{type:"rect",width:"50px",height:"50px",class:"q-ma-sm"}),t("div",ca,[t("div",pa,[a(b,{type:"text",width:"200px",height:"25px",class:"q-mt-sm"})]),t("div",wa,[a(b,{type:"text",width:"200px",height:"25px"})])]),a(G,{horizontal:"",class:"justify-around"},{default:n(()=>[a(b,{type:"QBtn",class:"q-ma-sm"}),a(b,{type:"QBtn",class:"q-ma-sm"})]),_:1})]),_:1})]),_:1})),a(b,{type:"circle",size:"60px",class:"absolute",style:{bottom:"0",right:"18px",transform:"translateY(-18px)"}})]),_:1})]),_:1},8,["style"])])],2)]),_:1})])}var ga=K(da,[["render",ba]]);const fa={name:"BallotPage",props:["user"],components:{BallotList:Xo,BallotTimeLine:ra,BallotPageSkeleton:ga},data:function(){return{searchInput:"",userBallot:!1,tab:"All",innerTabTournaments:0,innerTabMotions:0,splitterTournaments:20,splitterMotions:20,widthBreakPoint:1150}},mounted(){this.authStore.user===null&&this.$router.push({path:"/auth/0"}),this.ballotStore.ballots.length==0&&this.loadBallots(),this.user==1&&(this.userBallot=!this.userBallot)},methods:{async loadBallots(){await this.ballotStore.loadBallots()||this.$q.notify({icon:"warning",color:"negative",message:this.$t("ballot.load.failure")})},async userBallots(){await this.loadBallots();var e=[];this.userBallot?this.ballotStore.ballots.forEach(l=>{l.People.forEach(s=>{var h;((h=this.authStore.user)==null?void 0:h.person.id)===s.person_id.id&&s.author==1&&e.push(l)})}):this.ballotStore.ballots.forEach(l=>{e.push(l)}),this.ballotStore.ballotList=e},onAddClick(){this.authStore.user!=null&&this.authStore.user.person==null?this.$q.dialog({title:this.$t("ballot.add.warning.user.title"),message:this.$t("ballot.add.warning.user.message"),ok:{flat:!0,color:"light-blue-13"}}):this.ballotStore.ballot!=null?this.$q.dialog({title:this.$t("ballot.add.warning.autosave.title"),message:this.$t("ballot.add.warning.autosave.message"),persistent:!0,ok:{flat:!0,color:"orange-13",label:this.$t("ballot.add.warning.autosave.button.ok")},cancel:{flat:!0,color:"light-blue-13",label:this.$t("ballot.add.warning.autosave.button.cancel")}}).onOk(()=>{this.removeSavedBallot(),this.$router.push({path:"/ballot/edit/0"})}).onCancel(()=>{this.$router.push({path:"/ballot/edit/"+this.ballotStore.ballot.Ballot.id})}):this.$router.push({path:"/ballot/edit/0"})},search(e){const l=this.searchInput.toLowerCase();return e.filter(s=>s.Ballot.motion.name.toLowerCase().includes(l)||s.Ballot.tournament.name.toLowerCase().includes(l)||s.Ballot.date.toString().toLowerCase().includes(l)||s.Ballot.team_AFF.name.toLowerCase().includes(l)||s.Ballot.team_NEG.name.toLowerCase().includes(l)||s.Ballot.decision.toLowerCase().includes(l)||s.Ballot.adjucations.toLowerCase().includes(this.searchInput.toLowerCase()))},ballotFilterT(e){var l=[];return this.ballotStore.ballots.forEach(s=>{s.Ballot.tournament.id===e.id&&l.push(s)}),l},ballotFilterM(e){var l=[];return this.ballotStore.ballots.forEach(s=>{s.Ballot.motion.id===e.id&&l.push(s)}),l},removeSavedBallot(){localStorage.removeItem("ballot"),this.ballotStore.savedBallot=null}},computed:{...x(ee,te),tournaments(){var e=[],l=!1;return this.ballotStore.ballots.forEach(s=>{e.forEach(h=>{h.id==s.Ballot.tournament.id&&(l=!0)}),l||e.push(s.Ballot.tournament),l=!1}),e},motions(){var e=[],l=!1;return this.ballotStore.ballots.forEach(s=>{var h;e.forEach(q=>{var p;q.id==((p=s.Ballot.motion)==null?void 0:p.id)&&(l=!0)}),l||e.push((h=s.Ballot)==null?void 0:h.motion),l=!1}),e},motionName(){var l,s,h;let e=30;return((l=this.ballotStore.ballot.Ballot.motion)==null?void 0:l.name.length)>e?((s=this.ballotStore.ballot.Ballot.motion)==null?void 0:s.name.substring(0,e))+"...":(h=this.ballotStore.ballot.Ballot.motion)==null?void 0:h.name},mobileW(){return this.$q.platform.is.mobile?this.$q.screen.width:this.$q.screen.width/1.9},mobileH(){return this.$q.platform.is.mobile?this.$q.screen.height-50:0}}},va={key:1,id:"Ballot Page"},_a={class:"row"},ya={class:"text-h5 text-white text-center q-my-xs"},qa={class:"text-h5 q-mb-md"},$a={class:"text-h5 q-mb-md"};function ka(e,l,s,h,q,p){const v=Y("BallotPageSkeleton"),r=Y("BallotList"),$=Y("BallotTimeLine");return i(),w(D,null,[e.authStore.isLoading?(i(),u(v,{key:0})):k("",!0),e.authStore.isLoading?k("",!0):(i(),w("div",va,[a(re,{class:c(["row justify-center items-center",{"bg-grey-9":e.$q.dark.isActive}]),style:{background:"linear-gradient(#f3f3f5, #b4b4b4)"}},{default:n(()=>[e.authStore.user!=null?(i(),w("div",{key:0,class:c({"q-pa-lg":!e.$q.platform.is.mobile})},[t("div",_a,[a(M,{square:"",class:c({"shadow-24":!e.$q.dark.isActive}),style:V([{"min-height":"350px"},{minWidth:p.mobileW+"px",minHeight:p.mobileH+"px"}])},{default:n(()=>[a(Q,{class:c(["bg-dark",{"bg-black":e.$q.dark.isActive}])},{default:n(()=>[t("div",{class:c({"row justify-center":e.$q.screen.width>=e.widthBreakPoint,"row justify-start":e.$q.screen.width<=e.widthBreakPoint})},[t("h4",ya,o(e.$t("ballot.title")),1),a(at,{style:{bottom:"0",right:"18px",transform:"translateY(-15px)"},dark:"",dense:"",standout:"",modelValue:e.searchInput,"onUpdate:modelValue":l[1]||(l[1]=d=>e.searchInput=d),"input-class":"text-right",class:"q-ml-md absolute"},{append:n(()=>[e.searchInput===""?(i(),u(R,{key:0,name:"search"})):(i(),u(R,{key:1,name:"clear",class:"cursor-pointer",onClick:l[0]||(l[0]=d=>e.searchInput="")}))]),_:1},8,["modelValue"])],2)]),_:1},8,["class"]),t("div",{class:c(["row bg-dark justify-center",{"bg-black":e.$q.dark.isActive}])},[a(ae,{modelValue:e.tab,"onUpdate:modelValue":l[2]||(l[2]=d=>e.tab=d),"inline-label":"","outside-arrows":"","mobile-arrows":"",dense:"",class:"text-white",style:V({maxWidth:e.$q.screen.width/1.1+"px"})},{default:n(()=>[a(L,{name:"All",icon:"select_all",label:e.$t("ballot.tab.all")},null,8,["label"]),a(L,{name:"Tournaments",icon:"emoji_events",label:e.$t("ballot.tab.tournaments")},null,8,["label"]),a(L,{name:"Motions",icon:"history_edu",label:e.$t("ballot.tab.motions")},null,8,["label"]),a(L,{name:"Timeline",icon:"timeline",label:e.$t("ballot.tab.timeline")},null,8,["label"])]),_:1},8,["modelValue","style"])],2),a(Q,null,{default:n(()=>[a(se,{modelValue:e.tab,"onUpdate:modelValue":l[9]||(l[9]=d=>e.tab=d),animated:""},{default:n(()=>[a(z,{name:"All"},{default:n(()=>[a(r,{ballotList:p.search(e.ballotStore.ballots)},null,8,["ballotList"])]),_:1}),a(z,{name:"Tournaments"},{default:n(()=>[a(ze,{modelValue:e.splitterTournaments,"onUpdate:modelValue":l[5]||(l[5]=d=>e.splitterTournaments=d),horizontal:e.$q.screen.width<e.widthBreakPoint},{before:n(()=>[a(ae,{"inline-label":"","outside-arrows":"","mobile-arrows":"",dense:"",modelValue:e.innerTabTournaments,"onUpdate:modelValue":l[3]||(l[3]=d=>e.innerTabTournaments=d),vertical:e.$q.screen.width>e.widthBreakPoint,style:V({maxWidth:e.$q.screen.width/1.1+"px"})},{default:n(()=>[(i(!0),w(D,null,F(p.tournaments,(d,m)=>(i(),u(L,{name:m,label:d.name,key:m},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical","style"])]),after:n(()=>[a(se,{modelValue:e.innerTabTournaments,"onUpdate:modelValue":l[4]||(l[4]=d=>e.innerTabTournaments=d),animated:"","transition-prev":"slide-down","transition-next":"slide-up"},{default:n(()=>[(i(!0),w(D,null,F(p.tournaments,(d,m)=>(i(),u(z,{name:m,label:d.name,key:m},{default:n(()=>[t("div",qa,o(d.name),1),a(r,{ballotList:p.search(p.ballotFilterT(d))},null,8,["ballotList"])]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","horizontal"])]),_:1}),a(z,{name:"Motions"},{default:n(()=>[a(ze,{modelValue:e.splitterMotions,"onUpdate:modelValue":l[8]||(l[8]=d=>e.splitterMotions=d),horizontal:e.$q.screen.width<e.widthBreakPoint,style:V({maxWidth:e.$q.screen.width/1.1+"px"})},{before:n(()=>[a(ae,{"inline-label":"","outside-arrows":"","mobile-arrows":"",dense:"",modelValue:e.innerTabMotions,"onUpdate:modelValue":l[6]||(l[6]=d=>e.innerTabMotions=d),vertical:e.$q.screen.width>e.widthBreakPoint},{default:n(()=>[(i(!0),w(D,null,F(p.motions,(d,m)=>(i(),u(L,{name:m,label:d.name,key:m},null,8,["name","label"]))),128))]),_:1},8,["modelValue","vertical"])]),after:n(()=>[a(se,{modelValue:e.innerTabMotions,"onUpdate:modelValue":l[7]||(l[7]=d=>e.innerTabMotions=d),animated:"","transition-prev":"slide-down","transition-next":"slide-up"},{default:n(()=>[(i(!0),w(D,null,F(p.motions,(d,m)=>(i(),u(z,{name:m,label:d.name,key:m},{default:n(()=>[t("div",$a,o(d.name),1),a(r,{ballotList:p.search(p.ballotFilterM(d))},null,8,["ballotList"])]),_:2},1032,["name","label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue","horizontal","style"])]),_:1}),a(z,{name:"Timeline"},{default:n(()=>[a($)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(G,{class:"row justify-center",style:{"min-height":"50px"}},{default:n(()=>[e.authStore.user.person!=null?(i(),u(st,{key:0,class:"q-pa-lg absolute",style:{bottom:"0",left:"0"},modelValue:e.userBallot,"onUpdate:modelValue":l[10]||(l[10]=d=>e.userBallot=d),"checked-icon":"check","unchecked-icon":"clear",label:e.$q.screen.width<e.widthBreakPoint?"":e.$t("ballot.button.toggle"),"left-label":"",color:"light-blue-13",onClick:l[11]||(l[11]=d=>p.userBallots())},null,8,["modelValue","label"])):k("",!0),e.ballotStore.ballot!=null?(i(),u(M,{key:1,flat:"",bordered:"",class:"q-pa-xs"},{default:n(()=>[a(Q,{horizontal:""},{default:n(()=>[e.$q.screen.width>e.widthBreakPoint+450?(i(),u(We,{key:0},{default:n(()=>[a(ie,{avatar:""},{default:n(()=>[a(R,{name:"edit_document"})]),_:1}),a(ie,null,{default:n(()=>[a(Le,null,{default:n(()=>[g(o(p.motionName),1)]),_:1}),a(Le,{caption:""},{default:n(()=>{var d,m;return[g(o(((d=e.ballotStore.ballot.Ballot.tournament)==null?void 0:d.name)+" - "+new Date((m=e.ballotStore.ballot.Ballot)==null?void 0:m.date).toLocaleDateString()),1)]}),_:1})]),_:1})]),_:1})):k("",!0),a(G,{horizontal:"",class:"justify-around"},{default:n(()=>[e.$q.screen.width>e.widthBreakPoint+450?(i(),u(A,{key:0,to:{name:"ballotEdit",params:{id:e.ballotStore.ballot.Ballot.id}},flat:"",color:"light-blue-13",label:e.$t("ballot.button.open")},null,8,["to","label"])):(i(),u(A,{key:1,to:{name:"ballotEdit",params:{id:e.ballotStore.ballot.Ballot.id}},flat:"",round:"",icon:"file_open",color:"light-blue-13"},null,8,["to"])),e.$q.screen.width<e.widthBreakPoint+450?(i(),u(R,{key:2,name:"edit_document",size:"32px"})):k("",!0),e.$q.screen.width>e.widthBreakPoint+450?(i(),u(A,{key:3,onClick:l[12]||(l[12]=d=>p.removeSavedBallot()),flat:"",color:"negative",label:e.$t("ballot.button.delete")},null,8,["label"])):(i(),u(A,{key:4,onClick:l[13]||(l[13]=d=>p.removeSavedBallot()),flat:"",round:"",icon:"delete",color:"negative"}))]),_:1})]),_:1})]),_:1})):k("",!0),e.authStore.user.person!=null?(i(),u(A,{key:2,class:"absolute",style:{bottom:"0",right:"18px",transform:"translateY(-18px)"},fab:"",icon:"add",color:"orange-13",onClick:p.onAddClick},null,8,["onClick"])):k("",!0)]),_:1})]),_:1},8,["class","style"])])],2)):k("",!0)]),_:1},8,["class"])]))],64)}var Fa=K(fa,[["render",ka]]);export{Fa as default};
