import{d as _,I as q,J as o,V as m,f as t,L as s,a4 as l,b7 as v,W as k,b5 as h,b6 as F,a5 as p,S as A,Y as T,K as f,N as u,F as W,U as I,P as b,Z as y,O as $,b8 as g,M as d}from"./index.0f3dcf3a.js";import{Q as w}from"./QTooltip.bb21c793.js";import{Q as V}from"./QForm.a6533fa2.js";import{Q as n,a as C}from"./QSkeleton.953fdc16.js";import"./position-engine.be318796.js";import"./selection.b6202499.js";const z=_({name:"AuthPageSkeleton",computed:{mobileW(){return this.$q.platform.is.mobile?this.$q.screen.width:340},mobileH(){return this.$q.platform.is.mobile?this.$q.screen.height-50:500}}}),B={id:"auth Skeleton"},E={class:"row"},L={class:"row justify-center"},D=l("br",null,null,-1),H=l("br",null,null,-1),N={class:"row justify-center"};function j(e,i,c,Q,P,a){return o(),m("div",B,[t(C,{class:"row justify-center items-center",style:{background:"linear-gradient(#f3f3f5, #b4b4b4)"}},{default:s(()=>[l("div",{class:p({"q-pa-lg":!e.$q.platform.is.mobile})},[l("div",E,[t(v,{square:"",style:k({width:e.mobileW+"px",height:e.mobileH+"px"})},{default:s(()=>[t(h,null,{default:s(()=>[l("div",L,[t(n,{type:"rect",width:"100px",class:"q-ma-sm q-py-sm"})])]),_:1}),t(h,null,{default:s(()=>[t(n,{type:"circle",size:"60px",class:"absolute",style:{bottom:"0",right:"12px",transform:"translateY(-200px)"}}),t(V,{class:"q-px-sm q-pt-xl"},{default:s(()=>[t(n,{type:"QInput",class:"q-ma-sm"}),D,t(n,{type:"QInput",class:"q-ma-sm"})]),_:1})]),_:1}),H,t(F,{class:"q-px-lg"},{default:s(()=>[t(n,{type:"QBtn",height:"60px",class:"full-width"})]),_:1}),t(h,{class:"text-center q-pa-sm"},{default:s(()=>[l("div",N,[t(n,{type:"text",width:"200px",class:"q-ma-sm"})])]),_:1})]),_:1},8,["style"])])],2)]),_:1})])}var U=q(z,[["render",j]]);const Y={name:"AuthPage",components:{AuthPageSkeleton:U},props:["register"],data:function(){return{title:this.$t("auth.title.login"),email:"",password:"",repassword:"",registerForm:!1,passwordFieldType:"password",btnLabel:this.$t("auth.label.button.login"),visibility:!1,visibilityIcon:"visibility"}},created(){this.register==1&&this.switchTypeForm()},methods:{diffPassword(e){const i=this.password;return e&&e===i||this.$t("menu.prompt.diffPassword")},async submit(){this.registerForm?(this.$refs.email.validate(),this.$refs.password.validate(),this.$refs.repassword.validate()):(this.$refs.email.validate(),this.$refs.password.validate()),this.registerForm?!this.$refs.email.hasError&&!this.$refs.password.hasError&&this.password==this.repassword&&(await this.authStore.register(this.email,this.password,this.repassword)?(this.$q.notify({icon:"done",color:"positive",message:this.$t("auth.register.success")}),this.switchTypeForm()):this.$q.notify({icon:"warning",color:"negative",message:this.$t("auth.register.failure")})):!this.$refs.email.hasError&&!this.$refs.password.hasError&&(await this.authStore.login(this.email,this.password)?(this.$q.notify({icon:"done",color:"positive",message:this.$t("auth.login.success")}),this.$router.push({path:"/"})):(this.$q.notify({icon:"warning",color:"negative",message:this.$t("auth.login.failure")}),this.$router.push({path:"/auth/0"})))},switchTypeForm(){this.registerForm=!this.registerForm,this.title=this.registerForm?this.$t("auth.title.register"):this.$t("auth.title.login"),this.btnLabel=this.registerForm?this.$t("auth.label.button.register"):this.$t("auth.label.button.login")},switchVisibility(){this.visibility=!this.visibility,this.passwordFieldType=this.visibility?"text":"password",this.visibilityIcon=this.visibility?"visibility_off":"visibility"},alert(){this.$q.dialog({title:this.$t("auth.forgotpwd.title"),message:this.$t("auth.forgotpwd.message"),ok:{flat:!0,color:"light-blue-13"}})}},computed:{...A(I),mobileW(){return this.$q.platform.is.mobile?this.$q.screen.width:350},mobileH(){return this.$q.platform.is.mobile?this.$q.screen.height-50:0},langChange(){return this.$i18n.locale}},watch:{langChange(){this.registerForm?(this.title=this.$t("auth.title.register"),this.btnLabel=this.$t("auth.label.button.register")):(this.title=this.$t("auth.title.login"),this.btnLabel=this.$t("auth.label.button.login"))}}},J={id:"auth"},K={class:"row"},M={class:"text-h5 text-white text-center q-my-md"},O=l("br",null,null,-1),Z={key:0},G={key:0},R={key:1,class:"text-grey-6"};function X(e,i,c,Q,P,a){const S=T("AuthPageSkeleton");return o(),m(W,null,[e.authStore.isLoading?(o(),f(S,{key:0})):u("",!0),l("div",J,[t(C,{class:p(["row justify-center items-center",{"bg-grey-9":e.$q.dark.isActive}]),style:{background:"linear-gradient(#f3f3f5, #b4b4b4)"}},{default:s(()=>[l("div",{class:p({"q-pa-lg":!e.$q.platform.is.mobile})},[l("div",K,[t(v,{square:"",class:p({"shadow-24":!e.$q.dark.isActive}),style:k({minWidth:a.mobileW+"px",minHeight:a.mobileH+"px"})},{default:s(()=>[t(h,{class:p(["bg-dark",{"bg-black":e.$q.dark.isActive}])},{default:s(()=>[l("h4",M,b(e.title),1)]),_:1},8,["class"]),t(h,null,{default:s(()=>[t(y,{fab:"",ref:"switchButton",color:"orange-13",onClick:a.switchTypeForm,icon:"add",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"}},{default:s(()=>[e.registerForm?(o(),f(w,{key:1},{default:s(()=>[$(b(e.$t("auth.tooltip.login")),1)]),_:1})):(o(),f(w,{key:0},{default:s(()=>[$(b(e.$t("auth.tooltip.register")),1)]),_:1}))]),_:1},8,["onClick"]),t(V,{class:"q-px-sm q-pt-xl"},{default:s(()=>[t(g,{ref:"email",outlined:"",clearable:"",modelValue:e.email,"onUpdate:modelValue":i[0]||(i[0]=r=>e.email=r),type:"email","lazy-rules":"",rules:[e.$rules.required,e.$rules.isEmail,e.$rules.shortEmail],label:e.$t("auth.label.email")},{prepend:s(()=>[t(d,{name:"email"})]),_:1},8,["modelValue","rules","label"]),O,t(g,{ref:"password",outlined:"",clearable:"",modelValue:e.password,"onUpdate:modelValue":i[2]||(i[2]=r=>e.password=r),type:e.passwordFieldType,"lazy-rules":"",rules:[e.$rules.required,e.$rules.shortPWD,e.$rules.isValidPWD],label:e.$t("auth.label.password")},{prepend:s(()=>[t(d,{name:"lock"})]),append:s(()=>[t(d,{name:e.visibilityIcon,onClick:i[1]||(i[1]=r=>a.switchVisibility()),class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label"]),c.register?(o(),m("br",Z)):u("",!0),e.registerForm?(o(),f(g,{key:1,ref:"repassword",outlined:"",clearable:"",modelValue:e.repassword,"onUpdate:modelValue":i[4]||(i[4]=r=>e.repassword=r),type:e.passwordFieldType,"lazy-rules":"",rules:[e.$rules.required,e.$rules.shortPWD,e.$rules.isValidPWD,a.diffPassword],label:e.$t("auth.label.repassword")},{prepend:s(()=>[t(d,{name:"lock"})]),append:s(()=>[t(d,{name:e.visibilityIcon,onClick:i[3]||(i[3]=r=>a.switchVisibility()),class:"cursor-pointer"},null,8,["name"])]),_:1},8,["modelValue","type","rules","label"])):u("",!0)]),_:1})]),_:1}),t(F,{class:"q-px-lg"},{default:s(()=>[t(y,{elevated:"",size:"lg",color:"light-blue-13","text-color":"grey-1",onClick:a.submit,class:"full-width",label:e.btnLabel},null,8,["onClick","label"])]),_:1}),t(h,{class:"text-center q-pa-sm"},{default:s(()=>[c.register?u("",!0):(o(),m("br",G)),e.registerForm?u("",!0):(o(),m("p",R,[l("a",{href:"#",style:{"text-decoration":"none",color:"inherit"},onClick:i[5]||(i[5]=(...r)=>a.alert&&a.alert(...r))},b(e.$t("auth.forgotpwd.label")),1)]))]),_:1})]),_:1},8,["class","style"])])],2)]),_:1},8,["class"])])],64)}var ae=q(Y,[["render",X]]);export{ae as default};
